{"version":3,"sources":["bundle.min.js"],"names":["f","exports","module","define","amd","g","window","global","self","this","ICMClient","e","t","n","r","s","o","u","a","require","i","Error","code","l","call","length",1,"isFunction","val","isObject","merge","src","p","dst","args","splice","arguments","toString","hasOwnProperty","contains","array","value","indexOf","cloneDeep","obj","temp","constructor","key","genReqFn","path","client","config","method","opts","params","fullUrl","baseApiUrl","requestParams","notJSON","headers","Content-Type","defSubResource","basePath","http","optionsOrCallback","callback","defResource","optsOrCallback","id","subPath","subResources","exclude","show","remove","update","noId","get","list","create","token","url","rest","wrap","mime","errorCode","defaultRequest","X-Client-Version","Authorization","Accept","clientSetup","users","subResource","subscriptions","devices","tokens","notifications","audio","image","activities","securityGroups","userPermissions","members","permissions","messageTemplates","confirmationRequests","escalationRules","recipients","distributionLists","userSubscriptions","loadDefinitions","securityGroupMappings","distributionListMappings","loadRequests","session","reports","triggers","paginate","promise","successCallback","errorCallback","then","response","entity","next","request","originator","originalRequestParams","cancel","canceled","nextPageRequestParams","start","error","rest/interceptor/defaultRequest","rest/interceptor/errorCode","rest/interceptor/mime",2,"drainQueue","draining","currentQueue","len","queue","noop","process","nextTick","fun","push","setTimeout","title","browser","env","argv","version","versions","on","addListener","once","off","removeListener","removeAllListeners","emit","binding","name","cwd","chdir","dir","umask",3,"location","undef","buildUrl","template","queryStringParams","re","RegExp","test","replace","encodeURIComponent","undefined","startsWith","str","UrlBuilder","_template","_params","mixin","origin","urlRE","absoluteUrlRE","fullyQualifiedUrlRE","prototype","append","fullyQualify","isFullyQualified","protocol","isAbsolute","pathname","substring","lastIndexOf","build","isCrossOrigin","parts","hostname","port","match","href","host","search","hash","factory","./util/mixin",4,"setPlatformDefaultClient","./client/default","./client/xhr",5,"impl","target","skip","interceptor","chain","console","log","apply",6,"defaultClient","platformDefault","setDefaultClient","getDefaultClient","resetDefaultClient","../client",7,"parseHeaders","raw","trim","split","headerSplitRE","forEach","header","boundary","normalizeHeaderName","Array","isArray","safeMixin","source","Object","keys","prop","when","responsePromise","resolve","reject","headerName","XMLHttpRequest","engine","open","setRequestHeader","abort","onreadystatechange","readyState","DONE","status","text","statusText","getAllResponseHeaders","responseText","onerror","send","../UrlBuilder","../util/normalizeHeaderName","../util/responsePromise",8,"defaultInitHandler","defaultRequestHandler","defaultResponseHandler","race","promisesOrValues","promiseOrValue","ComplexRequest","properties","handlers","initHandler","requestHandler","successResponseHandler","errorResponseHandler","init","success","interceptedClient","context","meta","slice","./client","./util/responsePromise",9,"mixinUtil","defaulter","defaults","copy","mappings","../interceptor","../util/mixin",10,11,"registry","noopConverter","read","write","type","parse","accept","lookup","otherwise","permissive","converter","attempt","cause","../mime","../mime/registry",12,"prefix","endsWith","suffix",13,"uriTemplate","expand","../util/uriTemplate",14,"reduce","pair",15,"Registry","mimes","parsed","delegate","bind","register","child","./type/application/hal","./type/application/json","./type/application/x-www-form-urlencoded","./type/multipart/form-data","./type/text/plain",16,"defineProperty","configurable","enumerable","writeable","pathPrefix","find","lazyPromise","deprecationWarning","relationship","deprecation","warn","root","findProperties","embedded","resource","related","links","link","make","templated","clientOverride","clientFor","../../../interceptor/pathPrefix","../../../interceptor/template","../../../util/find","../../../util/lazyPromise","../../../util/responsePromise",17,"createConverter","reviver","replacer","JSON","stringify","extend",18,"urlEncode","encodedSpaceRE","urlDecode","urlEncodedSpaceRE","decodeURIComponent","entry",19,"isFormElement","object","nodeType","tagName","createFormDataFromObject","formData","FormData","property","File","Blob","String",20,21,"makePromise","Scheduler","async","asap","scheduler","./Scheduler","./env","./makePromise",22,"_async","_running","_queue","_queueLen","_afterQueue","_afterQueueLen","drain","_drain","enqueue","task","run","afterQueue",23,"TimeoutError","message","captureStackTrace",24,"makeApply","Promise","thisArg","_defer","callAndResolve","_handler","c","h","handler","fold","callAndResolveNext","x","tryCatchResolve","resolver",25,"state","applier","any","promises","handleFulfill","errors","handleReject","resolved","pending","become","_visitRemaining","visit","RangeError","some","fulfill","results","nFulfill","nReject","Math","max","min","notify","map","_traverse","filter","predicate","keep","filterSync","filtered","j","settle","all","settleOne","toPromise","fulfilled","rejected","_unreport","inspect","ar","liftCombine","reduceRight","arr","z","applyFold","spread","onFulfilled","../apply","../state",26,"rejectInvalidPredicate","TypeError","evaluatePredicate","isError","maybeThenable","identity","createCatchFilter","runSideEffect","propagate","result","propagateValue","origCatch","done","onResult","onError","receiver","onRejected","ensure","orElse","defaultValue","tap","onFulfilledSideEffect",27,"_beget","to",28,29,"iterate","condition","unfold","unspool","item","newSeed","seed",30,"progress","onProgress",31,"ms","y","setTimer","handleDelay","resolveDelay","onTimeout","reason","delay","timeout","clearTimer","../TimeoutError","../env",32,"throwit","format","report","handled","reported","logError","formatError","unreport","logInfo","formatObject","tasks","running","flush","shift","localConsole","info","onPotentiallyUnhandledRejection","rejection","onPotentiallyUnhandledRejectionHandled","onFatalRejection","../format",33,"withThis",34,"isNode","hasMutationObserver","MutationObserver","WebKitMutationObserver","initMutationObserver","scheduled","node","document","createTextNode","observe","characterData","data","MutationObs","capturedSetTimeout","clearTimeout","vertxRequire","vertx","cancelTimer","runOnLoop","runOnContext","_process",35,"stack","tryStringify",36,"environment","Handler","promiseResolve","promiseReject","promiseNotify","Pending","isPromise","Async","getHandler","Rejected","never","foreverPendingPromise","defer","begetFrom","parent","join","traverseWith","snd","traverse","tryCatch2","tryMap","mapAt","traverseAt","settleAt","Fulfilled","getHandlerMaybeThenable","visitRemaining","markAsHandled","runRace","getHandlerUntrusted","untrustedThen","Thenable","FailIfRejected","inheritedContext","createContext","consumers","thenable","AssimilateTask","errorId","_report","ReportTask","UnreportTask","cycle","ContinuationTask","continuation","ProgressTask","_then","tryAssimilate","Fold","failIfRejected","runContinuation1","enterContext","tryCatchReject","exitContext","runContinuation3","tryCatchReject3","runNotify","tryCatchReturn","b","inherit","Parent","Child","objectCreate","initEmitRejection","CustomEvent","hasCustomEvent","ev","detail","bubbles","cancelable","dispatchEvent","emitRejection","proto","fail","_state","q","cont","foreverPendingHandler","_resolve","_reject","_notify",37,"toPendingState","toRejectedState","toFulfilledState",38,"lift","Deferred","isPromiseLike","mapFunc","timed","flow","generate","unhandledRejection","feature","./lib/Promise","./lib/TimeoutError","./lib/apply","./lib/decorators/array","./lib/decorators/flow","./lib/decorators/fold","./lib/decorators/inspect","./lib/decorators/iterate","./lib/decorators/progress","./lib/decorators/timed","./lib/decorators/unhandledRejection","./lib/decorators/with",39,40,"work","started",41,"dest","empty",42,"toLowerCase","chunk","charAt","toUpperCase",43,"follow","rels","concat","rel","func","./normalizeHeaderName",44,"encode","allowed","char","charCodeAt","makeEncoder","charMap","unreserved","decode","strings","alpha","digit","genDelims","subDelims","reserved","scheme","userinfo","pchar","segment","query","fragment","set","chars","encodeURL","encodeScheme","encodeUserInfo","encodeHost","encodePort","encodePathSegment","encodePath","encodeQuery","encodeFragment",45,"operation","expression","variable","explode","prefixRE","exec","maxLength","parseInt","uriEncoder","separator","first","named","encoder","expandExpression","operations","expandTemplate","end","uri","+","#",".","/",";","?","&","=",",","!","@","|","./uriEncoder"],"mappings":"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","file":"bundle.min.js","sourcesContent":["(function(f){if(typeof exports===\"object\"&&typeof module!==\"undefined\"){module.exports=f()}else if(typeof define===\"function\"&&define.amd){define([],f)}else{var g;if(typeof window!==\"undefined\"){g=window}else if(typeof global!==\"undefined\"){g=global}else if(typeof self!==\"undefined\"){g=self}else{g=this}g.ICMClient = f()}})(function(){var define,module,exports;return (function e(t,n,r){function s(o,u){if(!n[o]){if(!t[o]){var a=typeof require==\"function\"&&require;if(!u&&a)return a(o,!0);if(i)return i(o,!0);var f=new Error(\"Cannot find module '\"+o+\"'\");throw f.code=\"MODULE_NOT_FOUND\",f}var l=n[o]={exports:{}};t[o][0].call(l.exports,function(e){var n=t[o][1][e];return s(n?n:e)},l,l.exports,e,t,n,r)}return n[o].exports}var i=typeof require==\"function\"&&require;for(var o=0;o<r.length;o++)s(r[o]);return s})({1:[function(require,module,exports){\nvar rest = require('rest');\nvar mime = require('rest/interceptor/mime');\nvar errorCode = require('rest/interceptor/errorCode');\nvar defaultRequest = require('rest/interceptor/defaultRequest');\n\nfunction isFunction(val) {\n    return typeof val === 'function';\n}\n\nfunction isObject(val) {\n    if (val === null) {\n        return false;\n    }\n    return (typeof val === 'function') || (typeof val === 'object');\n}\n\nfunction merge() {\n    var dst = {}, src, p, args = [].splice.call(arguments, 0);\n    while (args.length > 0) {\n        src = args.splice(0, 1)[0];\n        if (toString.call(src) == '[object Object]') {\n            for (p in src) {\n                if (src.hasOwnProperty(p)) {\n                    if (toString.call(src[p]) == '[object Object]') {\n                        dst[p] = merge(dst[p] || {}, src[p]);\n                    } else {\n                        dst[p] = src[p];\n                    }\n                }\n            }\n        }\n    }\n    return dst;\n}\n\nfunction contains(array, value) {\n    if (array) {\n        return array.indexOf(value) !== -1;\n    }\n    return false;\n}\n\nfunction cloneDeep(obj) {\n    if (obj == null || typeof(obj) != 'object') {\n        return obj;\n    }\n    var temp = obj.constructor();\n    for (var key in obj) {\n        if (obj.hasOwnProperty(key)) {\n            temp[key] = cloneDeep(obj[key]);\n        }\n    }\n    return temp;\n}\n\nfunction genReqFn(path, client, config, method, opts) {\n    return function (params) {\n        var fullUrl = '' + config.baseApiUrl + path;\n        var requestParams = merge({method: method, path: fullUrl},\n            opts.notJSON ? {} : {headers: {'Content-Type': 'application/json'}},\n            params);\n        return client(requestParams);\n    };\n}\n\nfunction defSubResource(basePath, http, config) {\n    return function (path, optionsOrCallback, callback) {\n        return defResource('' + basePath + path, http, config, optionsOrCallback, callback);\n    };\n}\n\nfunction defResource(path, http, config, optsOrCallback, callback) {\n    return function (id) {\n        var opts = isObject(optsOrCallback) ? optsOrCallback : {};\n        if (id) {\n            var subPath = path + '/' + id;\n            var subResources = {};\n            if (isFunction(optsOrCallback)) {\n                subResources = optsOrCallback(defSubResource(subPath, http, config));\n            } else if (isFunction(callback)) {\n                subResources = callback(defSubResource(subPath, http, config));\n            }\n            return merge({},\n                contains(opts.exclude, 'show') ? {} : {show: genReqFn(subPath, http, config, 'GET', opts)},\n                contains(opts.exclude, 'remove') ? {} : {remove: genReqFn(subPath, http, config, 'DELETE', opts)},\n                contains(opts.exclude, 'update') ? {} : {update: genReqFn(subPath, http, config, 'PUT', opts)},\n                subResources);\n        } else {\n            return merge({},\n                (!opts.noId ? {} : {get: genReqFn(path, http, config, 'GET', opts)}),\n                contains(opts.exclude, 'list') ? {} : {list: genReqFn(path, http, config, 'GET', opts)},\n                contains(opts.exclude, 'create') ? {} : {create: genReqFn(path, http, config, 'POST', opts)});\n        }\n    };\n}\n\nfunction ICMClient(config) {\n    config = cloneDeep(config);\n\n    if (!config) {\n        throw Error('Config object must be present');\n    } else if (!config.token) {\n        throw Error('Token must be present in config')\n    }\n\n    config.baseApiUrl = ((config != null ? config.url : null) || 'https://api.icmobile.singlewire.com') + '/api/v1-DEV';\n\n    var http = rest.wrap(mime)\n        .wrap(errorCode)\n        .wrap(defaultRequest, {\n            headers: {\n                'X-Client-Version': 'JSClient 0.0.1',\n                Authorization: 'Bearer ' + config.token,\n                Accept: 'application/json'\n            }\n        });\n\n    http = isFunction(config.clientSetup) ? config.clientSetup(http) : http;\n\n    return {\n        users: defResource('/users', http, config, function (subResource) {\n            return {\n                subscriptions: subResource('/subscriptions'),\n                devices: subResource('/devices'),\n                tokens: subResource('/tokens', {exclude: ['update']}),\n                notifications: subResource('/notifications', {exclude: ['update', 'create']}, function (subResource) {\n                    return {\n                        audio: subResource('/audio', {\n                            exclude: ['update', 'create', 'remove', 'list', 'show'],\n                            noId: true,\n                            notJSON: true\n                        }),\n                        image: subResource('/image', {\n                            exclude: ['update', 'create', 'remove', 'list', 'show'],\n                            noId: true,\n                            notJSON: true\n                        }),\n                        activities: subResource('/activities', {exclude: ['update', 'remove']})\n                    };\n                }),\n                securityGroups: subResource('/security-groups'),\n                userPermissions: subResource('/user-permissions')\n            };\n        }),\n        securityGroups: defResource('/security-groups', http, config, function (subResource) {\n            return {\n                members: subResource('/members'),\n                permissions: subResource('/permissions')\n            };\n        }),\n        messageTemplates: defResource('/message-templates', http, config, function (subResource) {\n            return {\n                audio: subResource('/audio', {\n                    exclude: ['update', 'create', 'remove', 'list', 'show'],\n                    noId: true,\n                    notJSON: true\n                }),\n                image: subResource('/image', {\n                    exclude: ['update', 'create', 'remove', 'list', 'show'],\n                    noId: true,\n                    notJSON: true\n                })\n            };\n        }),\n        confirmationRequests: defResource('/confirmation-requests', function (subResource) {\n            return {escalationRules: subResource('/escalation-rules')};\n        }),\n        notifications: defResource('/notifications', http, config, function (subResource) {\n            return {\n                audio: subResource('/audio', {\n                    exclude: ['update', 'create', 'remove', 'list', 'show'],\n                    noId: true,\n                    notJSON: true\n                }),\n                image: subResource('/image', {\n                    exclude: ['update', 'create', 'remove', 'list', 'show'],\n                    noId: true,\n                    notJSON: true\n                }),\n                activities: subResource('/activities', {exclude: ['update', 'remove']}),\n                recipients: subResource('/recipients', {exclude: ['update', 'create', 'remove']})\n            };\n        }),\n        distributionLists: defResource('/distribution-lists', http, config, function (subResource) {\n            return {userSubscriptions: subResource('/user-subscriptions')};\n        }),\n        loadDefinitions: defResource('/load-definitions', http, config, function (subResource) {\n            return {\n                securityGroupMappings: subResource('/security-group-mappings'),\n                distributionListMappings: subResource('/distribution-list-mappings'),\n                loadRequests: subResource('/load-requests', {exclude: ['update', 'remove']})\n            };\n        }),\n        session: defResource('/session', http, config, {\n            exclude: ['update', 'create', 'remove', 'list', 'show'],\n            noId: true\n        }),\n        reports: defResource('/reports', http, config, {exclude: ['update', 'create', 'remove']}),\n        triggers: defResource('/triggers', http, config),\n        paginate: function (promise, successCallback, errorCallback) {\n            var self = this;\n            return promise.then(function (response) {\n                if (successCallback && successCallback(response) && response.entity && response.entity.next) {\n                    var client = response.request.originator;\n                    var originalRequestParams = cloneDeep(response.request);\n                    delete originalRequestParams.cancel;\n                    delete originalRequestParams.canceled;\n                    delete originalRequestParams.originator;\n                    var nextPageRequestParams = merge(originalRequestParams, {params: {start: response.entity.next}});\n                    return self.paginate(client(nextPageRequestParams), successCallback, errorCallback);\n                }\n            }, function (error) {\n                if (isFunction(errorCallback)) {\n                    errorCallback(error)\n                }\n            });\n        }\n    };\n}\n\nmodule.exports = ICMClient;\n\n},{\"rest\":4,\"rest/interceptor/defaultRequest\":9,\"rest/interceptor/errorCode\":10,\"rest/interceptor/mime\":11}],2:[function(require,module,exports){\n// shim for using process in browser\n\nvar process = module.exports = {};\nvar queue = [];\nvar draining = false;\n\nfunction drainQueue() {\n    if (draining) {\n        return;\n    }\n    draining = true;\n    var currentQueue;\n    var len = queue.length;\n    while(len) {\n        currentQueue = queue;\n        queue = [];\n        var i = -1;\n        while (++i < len) {\n            currentQueue[i]();\n        }\n        len = queue.length;\n    }\n    draining = false;\n}\nprocess.nextTick = function (fun) {\n    queue.push(fun);\n    if (!draining) {\n        setTimeout(drainQueue, 0);\n    }\n};\n\nprocess.title = 'browser';\nprocess.browser = true;\nprocess.env = {};\nprocess.argv = [];\nprocess.version = ''; // empty string to avoid regexp issues\nprocess.versions = {};\n\nfunction noop() {}\n\nprocess.on = noop;\nprocess.addListener = noop;\nprocess.once = noop;\nprocess.off = noop;\nprocess.removeListener = noop;\nprocess.removeAllListeners = noop;\nprocess.emit = noop;\n\nprocess.binding = function (name) {\n    throw new Error('process.binding is not supported');\n};\n\n// TODO(shtylman)\nprocess.cwd = function () { return '/' };\nprocess.chdir = function (dir) {\n    throw new Error('process.chdir is not supported');\n};\nprocess.umask = function() { return 0; };\n\n},{}],3:[function(require,module,exports){\n/*\n * Copyright 2012-2013 the original author or authors\n * @license MIT, see LICENSE.txt for details\n *\n * @author Scott Andrews\n */\n\n(function (define, location) {\n\t'use strict';\n\n\tvar undef;\n\n\tdefine(function (require) {\n\n\t\tvar mixin, origin, urlRE, absoluteUrlRE, fullyQualifiedUrlRE;\n\n\t\tmixin = require('./util/mixin');\n\n\t\turlRE = /([a-z][a-z0-9\\+\\-\\.]*:)\\/\\/([^@]+@)?(([^:\\/]+)(:([0-9]+))?)?(\\/[^?#]*)?(\\?[^#]*)?(#\\S*)?/i;\n\t\tabsoluteUrlRE = /^([a-z][a-z0-9\\-\\+\\.]*:\\/\\/|\\/)/i;\n\t\tfullyQualifiedUrlRE = /([a-z][a-z0-9\\+\\-\\.]*:)\\/\\/([^@]+@)?(([^:\\/]+)(:([0-9]+))?)?\\//i;\n\n\t\t/**\n\t\t * Apply params to the template to create a URL.\n\t\t *\n\t\t * Parameters that are not applied directly to the template, are appended\n\t\t * to the URL as query string parameters.\n\t\t *\n\t\t * @param {string} template the URI template\n\t\t * @param {Object} params parameters to apply to the template\n\t\t * @return {string} the resulting URL\n\t\t */\n\t\tfunction buildUrl(template, params) {\n\t\t\t// internal builder to convert template with params.\n\t\t\tvar url, name, queryStringParams, re;\n\n\t\t\turl = template;\n\t\t\tqueryStringParams = {};\n\n\t\t\tif (params) {\n\t\t\t\tfor (name in params) {\n\t\t\t\t\t/*jshint forin:false */\n\t\t\t\t\tre = new RegExp('\\\\{' + name + '\\\\}');\n\t\t\t\t\tif (re.test(url)) {\n\t\t\t\t\t\turl = url.replace(re, encodeURIComponent(params[name]), 'g');\n\t\t\t\t\t}\n\t\t\t\t\telse {\n\t\t\t\t\t\tqueryStringParams[name] = params[name];\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\tfor (name in queryStringParams) {\n\t\t\t\t\turl += url.indexOf('?') === -1 ? '?' : '&';\n\t\t\t\t\turl += encodeURIComponent(name);\n\t\t\t\t\tif (queryStringParams[name] !== null && queryStringParams[name] !== undefined) {\n\t\t\t\t\t\turl += '=';\n\t\t\t\t\t\turl += encodeURIComponent(queryStringParams[name]);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t\treturn url;\n\t\t}\n\n\t\tfunction startsWith(str, test) {\n\t\t\treturn str.indexOf(test) === 0;\n\t\t}\n\n\t\t/**\n\t\t * Create a new URL Builder\n\t\t *\n\t\t * @param {string|UrlBuilder} template the base template to build from, may be another UrlBuilder\n\t\t * @param {Object} [params] base parameters\n\t\t * @constructor\n\t\t */\n\t\tfunction UrlBuilder(template, params) {\n\t\t\tif (!(this instanceof UrlBuilder)) {\n\t\t\t\t// invoke as a constructor\n\t\t\t\treturn new UrlBuilder(template, params);\n\t\t\t}\n\n\t\t\tif (template instanceof UrlBuilder) {\n\t\t\t\tthis._template = template.template;\n\t\t\t\tthis._params = mixin({}, this._params, params);\n\t\t\t}\n\t\t\telse {\n\t\t\t\tthis._template = (template || '').toString();\n\t\t\t\tthis._params = params || {};\n\t\t\t}\n\t\t}\n\n\t\tUrlBuilder.prototype = {\n\n\t\t\t/**\n\t\t\t * Create a new UrlBuilder instance that extends the current builder.\n\t\t\t * The current builder is unmodified.\n\t\t\t *\n\t\t\t * @param {string} [template] URL template to append to the current template\n\t\t\t * @param {Object} [params] params to combine with current params.  New params override existing params\n\t\t\t * @return {UrlBuilder} the new builder\n\t\t\t */\n\t\t\tappend: function (template,  params) {\n\t\t\t\t// TODO consider query strings and fragments\n\t\t\t\treturn new UrlBuilder(this._template + template, mixin({}, this._params, params));\n\t\t\t},\n\n\t\t\t/**\n\t\t\t * Create a new UrlBuilder with a fully qualified URL based on the\n\t\t\t * window's location or base href and the current templates relative URL.\n\t\t\t *\n\t\t\t * Path variables are preserved.\n\t\t\t *\n\t\t\t * *Browser only*\n\t\t\t *\n\t\t\t * @return {UrlBuilder} the fully qualified URL template\n\t\t\t */\n\t\t\tfullyQualify: function () {\n\t\t\t\tif (!location) { return this; }\n\t\t\t\tif (this.isFullyQualified()) { return this; }\n\n\t\t\t\tvar template = this._template;\n\n\t\t\t\tif (startsWith(template, '//')) {\n\t\t\t\t\ttemplate = origin.protocol + template;\n\t\t\t\t}\n\t\t\t\telse if (startsWith(template, '/')) {\n\t\t\t\t\ttemplate = origin.origin + template;\n\t\t\t\t}\n\t\t\t\telse if (!this.isAbsolute()) {\n\t\t\t\t\ttemplate = origin.origin + origin.pathname.substring(0, origin.pathname.lastIndexOf('/') + 1);\n\t\t\t\t}\n\n\t\t\t\tif (template.indexOf('/', 8) === -1) {\n\t\t\t\t\t// default the pathname to '/'\n\t\t\t\t\ttemplate = template + '/';\n\t\t\t\t}\n\n\t\t\t\treturn new UrlBuilder(template, this._params);\n\t\t\t},\n\n\t\t\t/**\n\t\t\t * True if the URL is absolute\n\t\t\t *\n\t\t\t * @return {boolean}\n\t\t\t */\n\t\t\tisAbsolute: function () {\n\t\t\t\treturn absoluteUrlRE.test(this.build());\n\t\t\t},\n\n\t\t\t/**\n\t\t\t * True if the URL is fully qualified\n\t\t\t *\n\t\t\t * @return {boolean}\n\t\t\t */\n\t\t\tisFullyQualified: function () {\n\t\t\t\treturn fullyQualifiedUrlRE.test(this.build());\n\t\t\t},\n\n\t\t\t/**\n\t\t\t * True if the URL is cross origin. The protocol, host and port must not be\n\t\t\t * the same in order to be cross origin,\n\t\t\t *\n\t\t\t * @return {boolean}\n\t\t\t */\n\t\t\tisCrossOrigin: function () {\n\t\t\t\tif (!origin) {\n\t\t\t\t\treturn true;\n\t\t\t\t}\n\t\t\t\tvar url = this.parts();\n\t\t\t\treturn url.protocol !== origin.protocol ||\n\t\t\t\t       url.hostname !== origin.hostname ||\n\t\t\t\t       url.port !== origin.port;\n\t\t\t},\n\n\t\t\t/**\n\t\t\t * Split a URL into its consituent parts following the naming convention of\n\t\t\t * 'window.location'. One difference is that the port will contain the\n\t\t\t * protocol default if not specified.\n\t\t\t *\n\t\t\t * @see https://developer.mozilla.org/en-US/docs/DOM/window.location\n\t\t\t *\n\t\t\t * @returns {Object} a 'window.location'-like object\n\t\t\t */\n\t\t\tparts: function () {\n\t\t\t\t/*jshint maxcomplexity:20 */\n\t\t\t\tvar url, parts;\n\t\t\t\turl = this.fullyQualify().build().match(urlRE);\n\t\t\t\tparts = {\n\t\t\t\t\thref: url[0],\n\t\t\t\t\tprotocol: url[1],\n\t\t\t\t\thost: url[3] || '',\n\t\t\t\t\thostname: url[4] || '',\n\t\t\t\t\tport: url[6],\n\t\t\t\t\tpathname: url[7] || '',\n\t\t\t\t\tsearch: url[8] || '',\n\t\t\t\t\thash: url[9] || ''\n\t\t\t\t};\n\t\t\t\tparts.origin = parts.protocol + '//' + parts.host;\n\t\t\t\tparts.port = parts.port || (parts.protocol === 'https:' ? '443' : parts.protocol === 'http:' ? '80' : '');\n\t\t\t\treturn parts;\n\t\t\t},\n\n\t\t\t/**\n\t\t\t * Expand the template replacing path variables with parameters\n\t\t\t *\n\t\t\t * @param {Object} [params] params to combine with current params.  New params override existing params\n\t\t\t * @return {string} the expanded URL\n\t\t\t */\n\t\t\tbuild: function (params) {\n\t\t\t\treturn buildUrl(this._template, mixin({}, this._params, params));\n\t\t\t},\n\n\t\t\t/**\n\t\t\t * @see build\n\t\t\t */\n\t\t\ttoString: function () {\n\t\t\t\treturn this.build();\n\t\t\t}\n\n\t\t};\n\n\t\torigin = location ? new UrlBuilder(location.href).parts() : undef;\n\n\t\treturn UrlBuilder;\n\t});\n\n}(\n\ttypeof define === 'function' && define.amd ? define : function (factory) { module.exports = factory(require); },\n\ttypeof window !== 'undefined' ? window.location : void 0\n\t// Boilerplate for AMD and Node\n));\n\n},{\"./util/mixin\":41}],4:[function(require,module,exports){\n/*\n * Copyright 2014 the original author or authors\n * @license MIT, see LICENSE.txt for details\n *\n * @author Scott Andrews\n */\n\n(function (define) {\n\t'use strict';\n\n\tdefine(function (require) {\n\n\t\tvar rest = require('./client/default'),\n\t\t    browser = require('./client/xhr');\n\n\t\trest.setPlatformDefaultClient(browser);\n\n\t\treturn rest;\n\n\t});\n\n}(\n\ttypeof define === 'function' && define.amd ? define : function (factory) { module.exports = factory(require); }\n\t// Boilerplate for AMD and Node\n));\n\n},{\"./client/default\":6,\"./client/xhr\":7}],5:[function(require,module,exports){\n/*\n * Copyright 2014 the original author or authors\n * @license MIT, see LICENSE.txt for details\n *\n * @author Scott Andrews\n */\n\n(function (define) {\n\t'use strict';\n\n\tdefine(function (/* require */) {\n\n\t\t/**\n\t\t * Add common helper methods to a client impl\n\t\t *\n\t\t * @param {function} impl the client implementation\n\t\t * @param {Client} [target] target of this client, used when wrapping other clients\n\t\t * @returns {Client} the client impl with additional methods\n\t\t */\n\t\treturn function client(impl, target) {\n\n\t\t\tif (target) {\n\n\t\t\t\t/**\n\t\t\t\t * @returns {Client} the target client\n\t\t\t\t */\n\t\t\t\timpl.skip = function skip() {\n\t\t\t\t\treturn target;\n\t\t\t\t};\n\n\t\t\t}\n\n\t\t\t/**\n\t\t\t * Allow a client to easily be wrapped by an interceptor\n\t\t\t *\n\t\t\t * @param {Interceptor} interceptor the interceptor to wrap this client with\n\t\t\t * @param [config] configuration for the interceptor\n\t\t\t * @returns {Client} the newly wrapped client\n\t\t\t */\n\t\t\timpl.wrap = function wrap(interceptor, config) {\n\t\t\t\treturn interceptor(impl, config);\n\t\t\t};\n\n\t\t\t/**\n\t\t\t * @deprecated\n\t\t\t */\n\t\t\timpl.chain = function chain() {\n\t\t\t\tif (typeof console !== 'undefined') {\n\t\t\t\t\tconsole.log('rest.js: client.chain() is deprecated, use client.wrap() instead');\n\t\t\t\t}\n\n\t\t\t\treturn impl.wrap.apply(this, arguments);\n\t\t\t};\n\n\t\t\treturn impl;\n\n\t\t};\n\n\t});\n\n}(\n\ttypeof define === 'function' && define.amd ? define : function (factory) { module.exports = factory(require); }\n\t// Boilerplate for AMD and Node\n));\n\n},{}],6:[function(require,module,exports){\n/*\n * Copyright 2014 the original author or authors\n * @license MIT, see LICENSE.txt for details\n *\n * @author Scott Andrews\n */\n\n(function (define) {\n\t'use strict';\n\n\tvar undef;\n\n\tdefine(function (require) {\n\n\t\t/**\n\t\t * Plain JS Object containing properties that represent an HTTP request.\n\t\t *\n\t\t * Depending on the capabilities of the underlying client, a request\n\t\t * may be cancelable. If a request may be canceled, the client will add\n\t\t * a canceled flag and cancel function to the request object. Canceling\n\t\t * the request will put the response into an error state.\n\t\t *\n\t\t * @field {string} [method='GET'] HTTP method, commonly GET, POST, PUT, DELETE or HEAD\n\t\t * @field {string|UrlBuilder} [path=''] path template with optional path variables\n\t\t * @field {Object} [params] parameters for the path template and query string\n\t\t * @field {Object} [headers] custom HTTP headers to send, in addition to the clients default headers\n\t\t * @field [entity] the HTTP entity, common for POST or PUT requests\n\t\t * @field {boolean} [canceled] true if the request has been canceled, set by the client\n\t\t * @field {Function} [cancel] cancels the request if invoked, provided by the client\n\t\t * @field {Client} [originator] the client that first handled this request, provided by the interceptor\n\t\t *\n\t\t * @class Request\n\t\t */\n\n\t\t/**\n\t\t * Plain JS Object containing properties that represent an HTTP response\n\t\t *\n\t\t * @field {Object} [request] the request object as received by the root client\n\t\t * @field {Object} [raw] the underlying request object, like XmlHttpRequest in a browser\n\t\t * @field {number} [status.code] status code of the response (i.e. 200, 404)\n\t\t * @field {string} [status.text] status phrase of the response\n\t\t * @field {Object] [headers] response headers hash of normalized name, value pairs\n\t\t * @field [entity] the response body\n\t\t *\n\t\t * @class Response\n\t\t */\n\n\t\t/**\n\t\t * HTTP client particularly suited for RESTful operations.\n\t\t *\n\t\t * @field {function} wrap wraps this client with a new interceptor returning the wrapped client\n\t\t *\n\t\t * @param {Request} the HTTP request\n\t\t * @returns {ResponsePromise<Response>} a promise the resolves to the HTTP response\n\t\t *\n\t\t * @class Client\n\t\t */\n\n\t\t /**\n\t\t  * Extended when.js Promises/A+ promise with HTTP specific helpers\n\t\t  *q\n\t\t  * @method entity promise for the HTTP entity\n\t\t  * @method status promise for the HTTP status code\n\t\t  * @method headers promise for the HTTP response headers\n\t\t  * @method header promise for a specific HTTP response header\n\t\t  *\n\t\t  * @class ResponsePromise\n\t\t  * @extends Promise\n\t\t  */\n\n\t\tvar client, target, platformDefault;\n\n\t\tclient = require('../client');\n\n\t\t/**\n\t\t * Make a request with the default client\n\t\t * @param {Request} the HTTP request\n\t\t * @returns {Promise<Response>} a promise the resolves to the HTTP response\n\t\t */\n\t\tfunction defaultClient() {\n\t\t\treturn target.apply(undef, arguments);\n\t\t}\n\n\t\t/**\n\t\t * Change the default client\n\t\t * @param {Client} client the new default client\n\t\t */\n\t\tdefaultClient.setDefaultClient = function setDefaultClient(client) {\n\t\t\ttarget = client;\n\t\t};\n\n\t\t/**\n\t\t * Obtain a direct reference to the current default client\n\t\t * @returns {Client} the default client\n\t\t */\n\t\tdefaultClient.getDefaultClient = function getDefaultClient() {\n\t\t\treturn target;\n\t\t};\n\n\t\t/**\n\t\t * Reset the default client to the platform default\n\t\t */\n\t\tdefaultClient.resetDefaultClient = function resetDefaultClient() {\n\t\t\ttarget = platformDefault;\n\t\t};\n\n\t\t/**\n\t\t * @private\n\t\t */\n\t\tdefaultClient.setPlatformDefaultClient = function setPlatformDefaultClient(client) {\n\t\t\tif (platformDefault) {\n\t\t\t\tthrow new Error('Unable to redefine platformDefaultClient');\n\t\t\t}\n\t\t\ttarget = platformDefault = client;\n\t\t};\n\n\t\treturn client(defaultClient);\n\n\t});\n\n}(\n\ttypeof define === 'function' && define.amd ? define : function (factory) { module.exports = factory(require); }\n\t// Boilerplate for AMD and Node\n));\n\n},{\"../client\":5}],7:[function(require,module,exports){\n/*\n * Copyright 2012-2014 the original author or authors\n * @license MIT, see LICENSE.txt for details\n *\n * @author Scott Andrews\n */\n\n(function (define, global) {\n\t'use strict';\n\n\tdefine(function (require) {\n\n\t\tvar when, UrlBuilder, normalizeHeaderName, responsePromise, client, headerSplitRE;\n\n\t\twhen = require('when');\n\t\tUrlBuilder = require('../UrlBuilder');\n\t\tnormalizeHeaderName = require('../util/normalizeHeaderName');\n\t\tresponsePromise = require('../util/responsePromise');\n\t\tclient = require('../client');\n\n\t\t// according to the spec, the line break is '\\r\\n', but doesn't hold true in practice\n\t\theaderSplitRE = /[\\r|\\n]+/;\n\n\t\tfunction parseHeaders(raw) {\n\t\t\t// Note: Set-Cookie will be removed by the browser\n\t\t\tvar headers = {};\n\n\t\t\tif (!raw) { return headers; }\n\n\t\t\traw.trim().split(headerSplitRE).forEach(function (header) {\n\t\t\t\tvar boundary, name, value;\n\t\t\t\tboundary = header.indexOf(':');\n\t\t\t\tname = normalizeHeaderName(header.substring(0, boundary).trim());\n\t\t\t\tvalue = header.substring(boundary + 1).trim();\n\t\t\t\tif (headers[name]) {\n\t\t\t\t\tif (Array.isArray(headers[name])) {\n\t\t\t\t\t\t// add to an existing array\n\t\t\t\t\t\theaders[name].push(value);\n\t\t\t\t\t}\n\t\t\t\t\telse {\n\t\t\t\t\t\t// convert single value to array\n\t\t\t\t\t\theaders[name] = [headers[name], value];\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\telse {\n\t\t\t\t\t// new, single value\n\t\t\t\t\theaders[name] = value;\n\t\t\t\t}\n\t\t\t});\n\n\t\t\treturn headers;\n\t\t}\n\n\t\tfunction safeMixin(target, source) {\n\t\t\tObject.keys(source || {}).forEach(function (prop) {\n\t\t\t\t// make sure the property already exists as\n\t\t\t\t// IE 6 will blow up if we add a new prop\n\t\t\t\tif (source.hasOwnProperty(prop) && prop in target) {\n\t\t\t\t\ttry {\n\t\t\t\t\t\ttarget[prop] = source[prop];\n\t\t\t\t\t}\n\t\t\t\t\tcatch (e) {\n\t\t\t\t\t\t// ignore, expected for some properties at some points in the request lifecycle\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t});\n\n\t\t\treturn target;\n\t\t}\n\n\t\treturn client(function xhr(request) {\n\t\t\treturn responsePromise.promise(function (resolve, reject) {\n\t\t\t\t/*jshint maxcomplexity:20 */\n\n\t\t\t\tvar client, method, url, headers, entity, headerName, response, XMLHttpRequest;\n\n\t\t\t\trequest = typeof request === 'string' ? { path: request } : request || {};\n\t\t\t\tresponse = { request: request };\n\n\t\t\t\tif (request.canceled) {\n\t\t\t\t\tresponse.error = 'precanceled';\n\t\t\t\t\treject(response);\n\t\t\t\t\treturn;\n\t\t\t\t}\n\n\t\t\t\tXMLHttpRequest = request.engine || global.XMLHttpRequest;\n\t\t\t\tif (!XMLHttpRequest) {\n\t\t\t\t\treject({ request: request, error: 'xhr-not-available' });\n\t\t\t\t\treturn;\n\t\t\t\t}\n\n\t\t\t\tentity = request.entity;\n\t\t\t\trequest.method = request.method || (entity ? 'POST' : 'GET');\n\t\t\t\tmethod = request.method;\n\t\t\t\turl = new UrlBuilder(request.path || '', request.params).build();\n\n\t\t\t\ttry {\n\t\t\t\t\tclient = response.raw = new XMLHttpRequest();\n\n\t\t\t\t\t// mixin extra request properties before and after opening the request as some properties require being set at different phases of the request\n\t\t\t\t\tsafeMixin(client, request.mixin);\n\t\t\t\t\tclient.open(method, url, true);\n\t\t\t\t\tsafeMixin(client, request.mixin);\n\n\t\t\t\t\theaders = request.headers;\n\t\t\t\t\tfor (headerName in headers) {\n\t\t\t\t\t\t/*jshint forin:false */\n\t\t\t\t\t\tif (headerName === 'Content-Type' && headers[headerName] === 'multipart/form-data') {\n\t\t\t\t\t\t\t// XMLHttpRequest generates its own Content-Type header with the\n\t\t\t\t\t\t\t// appropriate multipart boundary when sending multipart/form-data.\n\t\t\t\t\t\t\tcontinue;\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tclient.setRequestHeader(headerName, headers[headerName]);\n\t\t\t\t\t}\n\n\t\t\t\t\trequest.canceled = false;\n\t\t\t\t\trequest.cancel = function cancel() {\n\t\t\t\t\t\trequest.canceled = true;\n\t\t\t\t\t\tclient.abort();\n\t\t\t\t\t\treject(response);\n\t\t\t\t\t};\n\n\t\t\t\t\tclient.onreadystatechange = function (/* e */) {\n\t\t\t\t\t\tif (request.canceled) { return; }\n\t\t\t\t\t\tif (client.readyState === (XMLHttpRequest.DONE || 4)) {\n\t\t\t\t\t\t\tresponse.status = {\n\t\t\t\t\t\t\t\tcode: client.status,\n\t\t\t\t\t\t\t\ttext: client.statusText\n\t\t\t\t\t\t\t};\n\t\t\t\t\t\t\tresponse.headers = parseHeaders(client.getAllResponseHeaders());\n\t\t\t\t\t\t\tresponse.entity = client.responseText;\n\n\t\t\t\t\t\t\tif (response.status.code > 0) {\n\t\t\t\t\t\t\t\t// check status code as readystatechange fires before error event\n\t\t\t\t\t\t\t\tresolve(response);\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\telse {\n\t\t\t\t\t\t\t\t// give the error callback a chance to fire before resolving\n\t\t\t\t\t\t\t\t// requests for file:// URLs do not have a status code\n\t\t\t\t\t\t\t\tsetTimeout(function () {\n\t\t\t\t\t\t\t\t\tresolve(response);\n\t\t\t\t\t\t\t\t}, 0);\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t};\n\n\t\t\t\t\ttry {\n\t\t\t\t\t\tclient.onerror = function (/* e */) {\n\t\t\t\t\t\t\tresponse.error = 'loaderror';\n\t\t\t\t\t\t\treject(response);\n\t\t\t\t\t\t};\n\t\t\t\t\t}\n\t\t\t\t\tcatch (e) {\n\t\t\t\t\t\t// IE 6 will not support error handling\n\t\t\t\t\t}\n\n\t\t\t\t\tclient.send(entity);\n\t\t\t\t}\n\t\t\t\tcatch (e) {\n\t\t\t\t\tresponse.error = 'loaderror';\n\t\t\t\t\treject(response);\n\t\t\t\t}\n\n\t\t\t});\n\t\t});\n\n\t});\n\n}(\n\ttypeof define === 'function' && define.amd ? define : function (factory) { module.exports = factory(require); },\n\ttypeof window !== 'undefined' ? window : void 0\n\t// Boilerplate for AMD and Node\n));\n\n},{\"../UrlBuilder\":3,\"../client\":5,\"../util/normalizeHeaderName\":42,\"../util/responsePromise\":43,\"when\":38}],8:[function(require,module,exports){\n/*\n * Copyright 2012-2015 the original author or authors\n * @license MIT, see LICENSE.txt for details\n *\n * @author Scott Andrews\n */\n\n(function (define) {\n\t'use strict';\n\n\tdefine(function (require) {\n\n\t\tvar defaultClient, mixin, responsePromise, client, when;\n\n\t\tdefaultClient = require('./client/default');\n\t\tmixin = require('./util/mixin');\n\t\tresponsePromise = require('./util/responsePromise');\n\t\tclient = require('./client');\n\t\twhen = require('when');\n\n\t\t/**\n\t\t * Interceptors have the ability to intercept the request and/org response\n\t\t * objects.  They may augment, prune, transform or replace the\n\t\t * request/response as needed.  Clients may be composed by wrapping\n\t\t * together multiple interceptors.\n\t\t *\n\t\t * Configured interceptors are functional in nature.  Wrapping a client in\n\t\t * an interceptor will not affect the client, merely the data that flows in\n\t\t * and out of that client.  A common configuration can be created once and\n\t\t * shared; specialization can be created by further wrapping that client\n\t\t * with custom interceptors.\n\t\t *\n\t\t * @param {Client} [target] client to wrap\n\t\t * @param {Object} [config] configuration for the interceptor, properties will be specific to the interceptor implementation\n\t\t * @returns {Client} A client wrapped with the interceptor\n\t\t *\n\t\t * @class Interceptor\n\t\t */\n\n\t\tfunction defaultInitHandler(config) {\n\t\t\treturn config;\n\t\t}\n\n\t\tfunction defaultRequestHandler(request /*, config, meta */) {\n\t\t\treturn request;\n\t\t}\n\n\t\tfunction defaultResponseHandler(response /*, config, meta */) {\n\t\t\treturn response;\n\t\t}\n\n\t\tfunction race(promisesOrValues) {\n\t\t\t// this function is different than when.any as the first to reject also wins\n\t\t\treturn when.promise(function (resolve, reject) {\n\t\t\t\tpromisesOrValues.forEach(function (promiseOrValue) {\n\t\t\t\t\twhen(promiseOrValue, resolve, reject);\n\t\t\t\t});\n\t\t\t});\n\t\t}\n\n\t\t/**\n\t\t * Alternate return type for the request handler that allows for more complex interactions.\n\t\t *\n\t\t * @param properties.request the traditional request return object\n\t\t * @param {Promise} [properties.abort] promise that resolves if/when the request is aborted\n\t\t * @param {Client} [properties.client] override the defined client with an alternate client\n\t\t * @param [properties.response] response for the request, short circuit the request\n\t\t */\n\t\tfunction ComplexRequest(properties) {\n\t\t\tif (!(this instanceof ComplexRequest)) {\n\t\t\t\t// in case users forget the 'new' don't mix into the interceptor\n\t\t\t\treturn new ComplexRequest(properties);\n\t\t\t}\n\t\t\tmixin(this, properties);\n\t\t}\n\n\t\t/**\n\t\t * Create a new interceptor for the provided handlers.\n\t\t *\n\t\t * @param {Function} [handlers.init] one time intialization, must return the config object\n\t\t * @param {Function} [handlers.request] request handler\n\t\t * @param {Function} [handlers.response] response handler regardless of error state\n\t\t * @param {Function} [handlers.success] response handler when the request is not in error\n\t\t * @param {Function} [handlers.error] response handler when the request is in error, may be used to 'unreject' an error state\n\t\t * @param {Function} [handlers.client] the client to use if otherwise not specified, defaults to platform default client\n\t\t *\n\t\t * @returns {Interceptor}\n\t\t */\n\t\tfunction interceptor(handlers) {\n\n\t\t\tvar initHandler, requestHandler, successResponseHandler, errorResponseHandler;\n\n\t\t\thandlers = handlers || {};\n\n\t\t\tinitHandler            = handlers.init    || defaultInitHandler;\n\t\t\trequestHandler         = handlers.request || defaultRequestHandler;\n\t\t\tsuccessResponseHandler = handlers.success || handlers.response || defaultResponseHandler;\n\t\t\terrorResponseHandler   = handlers.error   || function () {\n\t\t\t\t// Propagate the rejection, with the result of the handler\n\t\t\t\treturn when((handlers.response || defaultResponseHandler).apply(this, arguments), when.reject, when.reject);\n\t\t\t};\n\n\t\t\treturn function (target, config) {\n\n\t\t\t\tif (typeof target === 'object') {\n\t\t\t\t\tconfig = target;\n\t\t\t\t}\n\t\t\t\tif (typeof target !== 'function') {\n\t\t\t\t\ttarget = handlers.client || defaultClient;\n\t\t\t\t}\n\n\t\t\t\tconfig = initHandler(config || {});\n\n\t\t\t\tfunction interceptedClient(request) {\n\t\t\t\t\tvar context, meta;\n\t\t\t\t\tcontext = {};\n\t\t\t\t\tmeta = { 'arguments': Array.prototype.slice.call(arguments), client: interceptedClient };\n\t\t\t\t\trequest = typeof request === 'string' ? { path: request } : request || {};\n\t\t\t\t\trequest.originator = request.originator || interceptedClient;\n\t\t\t\t\treturn responsePromise(\n\t\t\t\t\t\trequestHandler.call(context, request, config, meta),\n\t\t\t\t\t\tfunction (request) {\n\t\t\t\t\t\t\tvar response, abort, next;\n\t\t\t\t\t\t\tnext = target;\n\t\t\t\t\t\t\tif (request instanceof ComplexRequest) {\n\t\t\t\t\t\t\t\t// unpack request\n\t\t\t\t\t\t\t\tabort = request.abort;\n\t\t\t\t\t\t\t\tnext = request.client || next;\n\t\t\t\t\t\t\t\tresponse = request.response;\n\t\t\t\t\t\t\t\t// normalize request, must be last\n\t\t\t\t\t\t\t\trequest = request.request;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\tresponse = response || when(request, function (request) {\n\t\t\t\t\t\t\t\treturn when(\n\t\t\t\t\t\t\t\t\tnext(request),\n\t\t\t\t\t\t\t\t\tfunction (response) {\n\t\t\t\t\t\t\t\t\t\treturn successResponseHandler.call(context, response, config, meta);\n\t\t\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t\t\tfunction (response) {\n\t\t\t\t\t\t\t\t\t\treturn errorResponseHandler.call(context, response, config, meta);\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t);\n\t\t\t\t\t\t\t});\n\t\t\t\t\t\t\treturn abort ? race([response, abort]) : response;\n\t\t\t\t\t\t},\n\t\t\t\t\t\tfunction (error) {\n\t\t\t\t\t\t\treturn when.reject({ request: request, error: error });\n\t\t\t\t\t\t}\n\t\t\t\t\t);\n\t\t\t\t}\n\n\t\t\t\treturn client(interceptedClient, target);\n\t\t\t};\n\t\t}\n\n\t\tinterceptor.ComplexRequest = ComplexRequest;\n\n\t\treturn interceptor;\n\n\t});\n\n}(\n\ttypeof define === 'function' && define.amd ? define : function (factory) { module.exports = factory(require); }\n\t// Boilerplate for AMD and Node\n));\n\n},{\"./client\":5,\"./client/default\":6,\"./util/mixin\":41,\"./util/responsePromise\":43,\"when\":38}],9:[function(require,module,exports){\n/*\n * Copyright 2013 the original author or authors\n * @license MIT, see LICENSE.txt for details\n *\n * @author Scott Andrews\n */\n\n(function (define) {\n\t'use strict';\n\n\tdefine(function (require) {\n\n\t\tvar interceptor, mixinUtil, defaulter;\n\n\t\tinterceptor = require('../interceptor');\n\t\tmixinUtil = require('../util/mixin');\n\n\t\tdefaulter = (function () {\n\n\t\t\tfunction mixin(prop, target, defaults) {\n\t\t\t\tif (prop in target || prop in defaults) {\n\t\t\t\t\ttarget[prop] = mixinUtil({}, defaults[prop], target[prop]);\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tfunction copy(prop, target, defaults) {\n\t\t\t\tif (prop in defaults && !(prop in target)) {\n\t\t\t\t\ttarget[prop] = defaults[prop];\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tvar mappings = {\n\t\t\t\tmethod: copy,\n\t\t\t\tpath: copy,\n\t\t\t\tparams: mixin,\n\t\t\t\theaders: mixin,\n\t\t\t\tentity: copy,\n\t\t\t\tmixin: mixin\n\t\t\t};\n\n\t\t\treturn function (target, defaults) {\n\t\t\t\tfor (var prop in mappings) {\n\t\t\t\t\t/*jshint forin: false */\n\t\t\t\t\tmappings[prop](prop, target, defaults);\n\t\t\t\t}\n\t\t\t\treturn target;\n\t\t\t};\n\n\t\t}());\n\n\t\t/**\n\t\t * Provide default values for a request. These values will be applied to the\n\t\t * request if the request object does not already contain an explicit value.\n\t\t *\n\t\t * For 'params', 'headers', and 'mixin', individual values are mixed in with the\n\t\t * request's values. The result is a new object representiing the combined\n\t\t * request and config values. Neither input object is mutated.\n\t\t *\n\t\t * @param {Client} [client] client to wrap\n\t\t * @param {string} [config.method] the default method\n\t\t * @param {string} [config.path] the default path\n\t\t * @param {Object} [config.params] the default params, mixed with the request's existing params\n\t\t * @param {Object} [config.headers] the default headers, mixed with the request's existing headers\n\t\t * @param {Object} [config.mixin] the default \"mixins\" (http/https options), mixed with the request's existing \"mixins\"\n\t\t *\n\t\t * @returns {Client}\n\t\t */\n\t\treturn interceptor({\n\t\t\trequest: function handleRequest(request, config) {\n\t\t\t\treturn defaulter(request, config);\n\t\t\t}\n\t\t});\n\n\t});\n\n}(\n\ttypeof define === 'function' && define.amd ? define : function (factory) { module.exports = factory(require); }\n\t// Boilerplate for AMD and Node\n));\n\n},{\"../interceptor\":8,\"../util/mixin\":41}],10:[function(require,module,exports){\n/*\n * Copyright 2012-2013 the original author or authors\n * @license MIT, see LICENSE.txt for details\n *\n * @author Scott Andrews\n */\n\n(function (define) {\n\t'use strict';\n\n\tdefine(function (require) {\n\n\t\tvar interceptor, when;\n\n\t\tinterceptor = require('../interceptor');\n\t\twhen = require('when');\n\n\t\t/**\n\t\t * Rejects the response promise based on the status code.\n\t\t *\n\t\t * Codes greater than or equal to the provided value are rejected.  Default\n\t\t * value 400.\n\t\t *\n\t\t * @param {Client} [client] client to wrap\n\t\t * @param {number} [config.code=400] code to indicate a rejection\n\t\t *\n\t\t * @returns {Client}\n\t\t */\n\t\treturn interceptor({\n\t\t\tinit: function (config) {\n\t\t\t\tconfig.code = config.code || 400;\n\t\t\t\treturn config;\n\t\t\t},\n\t\t\tresponse: function (response, config) {\n\t\t\t\tif (response.status && response.status.code >= config.code) {\n\t\t\t\t\treturn when.reject(response);\n\t\t\t\t}\n\t\t\t\treturn response;\n\t\t\t}\n\t\t});\n\n\t});\n\n}(\n\ttypeof define === 'function' && define.amd ? define : function (factory) { module.exports = factory(require); }\n\t// Boilerplate for AMD and Node\n));\n\n},{\"../interceptor\":8,\"when\":38}],11:[function(require,module,exports){\n/*\n * Copyright 2012-2014 the original author or authors\n * @license MIT, see LICENSE.txt for details\n *\n * @author Scott Andrews\n */\n\n(function (define) {\n\t'use strict';\n\n\tdefine(function (require) {\n\n\t\tvar interceptor, mime, registry, noopConverter, when;\n\n\t\tinterceptor = require('../interceptor');\n\t\tmime = require('../mime');\n\t\tregistry = require('../mime/registry');\n\t\twhen = require('when');\n\n\t\tnoopConverter = {\n\t\t\tread: function (obj) { return obj; },\n\t\t\twrite: function (obj) { return obj; }\n\t\t};\n\n\t\t/**\n\t\t * MIME type support for request and response entities.  Entities are\n\t\t * (de)serialized using the converter for the MIME type.\n\t\t *\n\t\t * Request entities are converted using the desired converter and the\n\t\t * 'Accept' request header prefers this MIME.\n\t\t *\n\t\t * Response entities are converted based on the Content-Type response header.\n\t\t *\n\t\t * @param {Client} [client] client to wrap\n\t\t * @param {string} [config.mime='text/plain'] MIME type to encode the request\n\t\t *   entity\n\t\t * @param {string} [config.accept] Accept header for the request\n\t\t * @param {Client} [config.client=<request.originator>] client passed to the\n\t\t *   converter, defaults to the client originating the request\n\t\t * @param {Registry} [config.registry] MIME registry, defaults to the root\n\t\t *   registry\n\t\t * @param {boolean} [config.permissive] Allow an unkown request MIME type\n\t\t *\n\t\t * @returns {Client}\n\t\t */\n\t\treturn interceptor({\n\t\t\tinit: function (config) {\n\t\t\t\tconfig.registry = config.registry || registry;\n\t\t\t\treturn config;\n\t\t\t},\n\t\t\trequest: function (request, config) {\n\t\t\t\tvar type, headers;\n\n\t\t\t\theaders = request.headers || (request.headers = {});\n\t\t\t\ttype = mime.parse(headers['Content-Type'] = headers['Content-Type'] || config.mime || 'text/plain');\n\t\t\t\theaders.Accept = headers.Accept || config.accept || type.raw + ', application/json;q=0.8, text/plain;q=0.5, */*;q=0.2';\n\n\t\t\t\tif (!('entity' in request)) {\n\t\t\t\t\treturn request;\n\t\t\t\t}\n\n\t\t\t\treturn config.registry.lookup(type).otherwise(function () {\n\t\t\t\t\t// failed to resolve converter\n\t\t\t\t\tif (config.permissive) {\n\t\t\t\t\t\treturn noopConverter;\n\t\t\t\t\t}\n\t\t\t\t\tthrow 'mime-unknown';\n\t\t\t\t}).then(function (converter) {\n\t\t\t\t\tvar client = config.client || request.originator;\n\n\t\t\t\t\treturn when.attempt(converter.write, request.entity, { client: client, request: request, mime: type, registry: config.registry })\n\t\t\t\t\t\t.otherwise(function() {\n\t\t\t\t\t\t\tthrow 'mime-serialization';\n\t\t\t\t\t\t})\n\t\t\t\t\t\t.then(function(entity) {\n\t\t\t\t\t\t\trequest.entity = entity;\n\t\t\t\t\t\t\treturn request;\n\t\t\t\t\t\t});\n\t\t\t\t});\n\t\t\t},\n\t\t\tresponse: function (response, config) {\n\t\t\t\tif (!(response.headers && response.headers['Content-Type'] && response.entity)) {\n\t\t\t\t\treturn response;\n\t\t\t\t}\n\n\t\t\t\tvar type = mime.parse(response.headers['Content-Type']);\n\n\t\t\t\treturn config.registry.lookup(type).otherwise(function () { return noopConverter; }).then(function (converter) {\n\t\t\t\t\tvar client = config.client || response.request && response.request.originator;\n\n\t\t\t\t\treturn when.attempt(converter.read, response.entity, { client: client, response: response, mime: type, registry: config.registry })\n\t\t\t\t\t\t.otherwise(function (e) {\n\t\t\t\t\t\t\tresponse.error = 'mime-deserialization';\n\t\t\t\t\t\t\tresponse.cause = e;\n\t\t\t\t\t\t\tthrow response;\n\t\t\t\t\t\t})\n\t\t\t\t\t\t.then(function (entity) {\n\t\t\t\t\t\t\tresponse.entity = entity;\n\t\t\t\t\t\t\treturn response;\n\t\t\t\t\t\t});\n\t\t\t\t});\n\t\t\t}\n\t\t});\n\n\t});\n\n}(\n\ttypeof define === 'function' && define.amd ? define : function (factory) { module.exports = factory(require); }\n\t// Boilerplate for AMD and Node\n));\n\n},{\"../interceptor\":8,\"../mime\":14,\"../mime/registry\":15,\"when\":38}],12:[function(require,module,exports){\n/*\n * Copyright 2012-2013 the original author or authors\n * @license MIT, see LICENSE.txt for details\n *\n * @author Scott Andrews\n */\n\n(function (define) {\n\t'use strict';\n\n\tdefine(function (require) {\n\n\t\tvar interceptor, UrlBuilder;\n\n\t\tinterceptor = require('../interceptor');\n\t\tUrlBuilder = require('../UrlBuilder');\n\n\t\tfunction startsWith(str, prefix) {\n\t\t\treturn str.indexOf(prefix) === 0;\n\t\t}\n\n\t\tfunction endsWith(str, suffix) {\n\t\t\treturn str.lastIndexOf(suffix) + suffix.length === str.length;\n\t\t}\n\n\t\t/**\n\t\t * Prefixes the request path with a common value.\n\t\t *\n\t\t * @param {Client} [client] client to wrap\n\t\t * @param {number} [config.prefix] path prefix\n\t\t *\n\t\t * @returns {Client}\n\t\t */\n\t\treturn interceptor({\n\t\t\trequest: function (request, config) {\n\t\t\t\tvar path;\n\n\t\t\t\tif (config.prefix && !(new UrlBuilder(request.path).isFullyQualified())) {\n\t\t\t\t\tpath = config.prefix;\n\t\t\t\t\tif (request.path) {\n\t\t\t\t\t\tif (!endsWith(path, '/') && !startsWith(request.path, '/')) {\n\t\t\t\t\t\t\t// add missing '/' between path sections\n\t\t\t\t\t\t\tpath += '/';\n\t\t\t\t\t\t}\n\t\t\t\t\t\tpath += request.path;\n\t\t\t\t\t}\n\t\t\t\t\trequest.path = path;\n\t\t\t\t}\n\n\t\t\t\treturn request;\n\t\t\t}\n\t\t});\n\n\t});\n\n}(\n\ttypeof define === 'function' && define.amd ? define : function (factory) { module.exports = factory(require); }\n\t// Boilerplate for AMD and Node\n));\n\n},{\"../UrlBuilder\":3,\"../interceptor\":8}],13:[function(require,module,exports){\n/*\n * Copyright 2015 the original author or authors\n * @license MIT, see LICENSE.txt for details\n *\n * @author Scott Andrews\n */\n\n(function (define) {\n\t'use strict';\n\n\tdefine(function (require) {\n\n\t\tvar interceptor, uriTemplate, mixin;\n\n\t\tinterceptor = require('../interceptor');\n\t\turiTemplate = require('../util/uriTemplate');\n\t\tmixin = require('../util/mixin');\n\n\t\t/**\n\t\t * Applies request params to the path as a URI Template\n\t\t *\n\t\t * Params are removed from the request object, as they have been consumed.\n\t\t *\n\t\t * @param {Client} [client] client to wrap\n\t\t * @param {Object} [config.params] default param values\n\t\t * @param {string} [config.template] default template\n\t\t *\n\t\t * @returns {Client}\n\t\t */\n\t\treturn interceptor({\n\t\t\tinit: function (config) {\n\t\t\t\tconfig.params = config.params || {};\n\t\t\t\tconfig.template = config.template || '';\n\t\t\t\treturn config;\n\t\t\t},\n\t\t\trequest: function (request, config) {\n\t\t\t\tvar template, params;\n\n\t\t\t\ttemplate = request.path || config.template;\n\t\t\t\tparams = mixin({}, request.params, config.params);\n\n\t\t\t\trequest.path = uriTemplate.expand(template, params);\n\t\t\t\tdelete request.params;\n\n\t\t\t\treturn request;\n\t\t\t}\n\t\t});\n\n\t});\n\n}(\n\ttypeof define === 'function' && define.amd ? define : function (factory) { module.exports = factory(require); }\n\t// Boilerplate for AMD and Node\n));\n\n},{\"../interceptor\":8,\"../util/mixin\":41,\"../util/uriTemplate\":45}],14:[function(require,module,exports){\n/*\n* Copyright 2014 the original author or authors\n* @license MIT, see LICENSE.txt for details\n*\n* @author Scott Andrews\n*/\n\n(function (define) {\n\t'use strict';\n\n\tvar undef;\n\n\tdefine(function (/* require */) {\n\n\t\t/**\n\t\t * Parse a MIME type into it's constituent parts\n\t\t *\n\t\t * @param {string} mime MIME type to parse\n\t\t * @return {{\n\t\t *   {string} raw the original MIME type\n\t\t *   {string} type the type and subtype\n\t\t *   {string} [suffix] mime suffix, including the plus, if any\n\t\t *   {Object} params key/value pair of attributes\n\t\t * }}\n\t\t */\n\t\tfunction parse(mime) {\n\t\t\tvar params, type;\n\n\t\t\tparams = mime.split(';');\n\t\t\ttype = params[0].trim().split('+');\n\n\t\t\treturn {\n\t\t\t\traw: mime,\n\t\t\t\ttype: type[0],\n\t\t\t\tsuffix: type[1] ? '+' + type[1] : '',\n\t\t\t\tparams: params.slice(1).reduce(function (params, pair) {\n\t\t\t\t\tpair = pair.split('=');\n\t\t\t\t\tparams[pair[0].trim()] = pair[1] ? pair[1].trim() : undef;\n\t\t\t\t\treturn params;\n\t\t\t\t}, {})\n\t\t\t};\n\t\t}\n\n\t\treturn {\n\t\t\tparse: parse\n\t\t};\n\n\t});\n\n}(\n\ttypeof define === 'function' && define.amd ? define : function (factory) { module.exports = factory(require); }\n\t// Boilerplate for AMD and Node\n));\n\n},{}],15:[function(require,module,exports){\n/*\n * Copyright 2012-2014 the original author or authors\n * @license MIT, see LICENSE.txt for details\n *\n * @author Scott Andrews\n */\n\n(function (define) {\n\t'use strict';\n\n\tdefine(function (require) {\n\n\t\tvar mime, when, registry;\n\n\t\tmime = require('../mime');\n\t\twhen = require('when');\n\n\t\tfunction Registry(mimes) {\n\n\t\t\t/**\n\t\t\t * Lookup the converter for a MIME type\n\t\t\t *\n\t\t\t * @param {string} type the MIME type\n\t\t\t * @return a promise for the converter\n\t\t\t */\n\t\t\tthis.lookup = function lookup(type) {\n\t\t\t\tvar parsed;\n\n\t\t\t\tparsed = typeof type === 'string' ? mime.parse(type) : type;\n\n\t\t\t\tif (mimes[parsed.raw]) {\n\t\t\t\t\treturn mimes[parsed.raw];\n\t\t\t\t}\n\t\t\t\tif (mimes[parsed.type + parsed.suffix]) {\n\t\t\t\t\treturn mimes[parsed.type + parsed.suffix];\n\t\t\t\t}\n\t\t\t\tif (mimes[parsed.type]) {\n\t\t\t\t\treturn mimes[parsed.type];\n\t\t\t\t}\n\t\t\t\tif (mimes[parsed.suffix]) {\n\t\t\t\t\treturn mimes[parsed.suffix];\n\t\t\t\t}\n\n\t\t\t\treturn when.reject(new Error('Unable to locate converter for mime \"' + parsed.raw + '\"'));\n\t\t\t};\n\n\t\t\t/**\n\t\t\t * Create a late dispatched proxy to the target converter.\n\t\t\t *\n\t\t\t * Common when a converter is registered under multiple names and\n\t\t\t * should be kept in sync if updated.\n\t\t\t *\n\t\t\t * @param {string} type mime converter to dispatch to\n\t\t\t * @returns converter whose read/write methods target the desired mime converter\n\t\t\t */\n\t\t\tthis.delegate = function delegate(type) {\n\t\t\t\treturn {\n\t\t\t\t\tread: function () {\n\t\t\t\t\t\tvar args = arguments;\n\t\t\t\t\t\treturn this.lookup(type).then(function (converter) {\n\t\t\t\t\t\t\treturn converter.read.apply(this, args);\n\t\t\t\t\t\t}.bind(this));\n\t\t\t\t\t}.bind(this),\n\t\t\t\t\twrite: function () {\n\t\t\t\t\t\tvar args = arguments;\n\t\t\t\t\t\treturn this.lookup(type).then(function (converter) {\n\t\t\t\t\t\t\treturn converter.write.apply(this, args);\n\t\t\t\t\t\t}.bind(this));\n\t\t\t\t\t}.bind(this)\n\t\t\t\t};\n\t\t\t};\n\n\t\t\t/**\n\t\t\t * Register a custom converter for a MIME type\n\t\t\t *\n\t\t\t * @param {string} type the MIME type\n\t\t\t * @param converter the converter for the MIME type\n\t\t\t * @return a promise for the converter\n\t\t\t */\n\t\t\tthis.register = function register(type, converter) {\n\t\t\t\tmimes[type] = when(converter);\n\t\t\t\treturn mimes[type];\n\t\t\t};\n\n\t\t\t/**\n\t\t\t * Create a child registry whoes registered converters remain local, while\n\t\t\t * able to lookup converters from its parent.\n\t\t\t *\n\t\t\t * @returns child MIME registry\n\t\t\t */\n\t\t\tthis.child = function child() {\n\t\t\t\treturn new Registry(Object.create(mimes));\n\t\t\t};\n\n\t\t}\n\n\t\tregistry = new Registry({});\n\n\t\t// include provided serializers\n\t\tregistry.register('application/hal', require('./type/application/hal'));\n\t\tregistry.register('application/json', require('./type/application/json'));\n\t\tregistry.register('application/x-www-form-urlencoded', require('./type/application/x-www-form-urlencoded'));\n\t\tregistry.register('multipart/form-data', require('./type/multipart/form-data'));\n\t\tregistry.register('text/plain', require('./type/text/plain'));\n\n\t\tregistry.register('+json', registry.delegate('application/json'));\n\n\t\treturn registry;\n\n\t});\n\n}(\n\ttypeof define === 'function' && define.amd ? define : function (factory) { module.exports = factory(require); }\n\t// Boilerplate for AMD and Node\n));\n\n},{\"../mime\":14,\"./type/application/hal\":16,\"./type/application/json\":17,\"./type/application/x-www-form-urlencoded\":18,\"./type/multipart/form-data\":19,\"./type/text/plain\":20,\"when\":38}],16:[function(require,module,exports){\n/*\n * Copyright 2013-2015 the original author or authors\n * @license MIT, see LICENSE.txt for details\n *\n * @author Scott Andrews\n */\n\n(function (define) {\n\t'use strict';\n\n\tdefine(function (require) {\n\n\t\tvar pathPrefix, template, find, lazyPromise, responsePromise, when;\n\n\t\tpathPrefix = require('../../../interceptor/pathPrefix');\n\t\ttemplate = require('../../../interceptor/template');\n\t\tfind = require('../../../util/find');\n\t\tlazyPromise = require('../../../util/lazyPromise');\n\t\tresponsePromise = require('../../../util/responsePromise');\n\t\twhen = require('when');\n\n\t\tfunction defineProperty(obj, name, value) {\n\t\t\tObject.defineProperty(obj, name, {\n\t\t\t\tvalue: value,\n\t\t\t\tconfigurable: true,\n\t\t\t\tenumerable: false,\n\t\t\t\twriteable: true\n\t\t\t});\n\t\t}\n\n\t\t/**\n\t\t * Hypertext Application Language serializer\n\t\t *\n\t\t * Implemented to https://tools.ietf.org/html/draft-kelly-json-hal-06\n\t\t *\n\t\t * As the spec is still a draft, this implementation will be updated as the\n\t\t * spec evolves\n\t\t *\n\t\t * Objects are read as HAL indexing links and embedded objects on to the\n\t\t * resource. Objects are written as plain JSON.\n\t\t *\n\t\t * Embedded relationships are indexed onto the resource by the relationship\n\t\t * as a promise for the related resource.\n\t\t *\n\t\t * Links are indexed onto the resource as a lazy promise that will GET the\n\t\t * resource when a handler is first registered on the promise.\n\t\t *\n\t\t * A `requestFor` method is added to the entity to make a request for the\n\t\t * relationship.\n\t\t *\n\t\t * A `clientFor` method is added to the entity to get a full Client for a\n\t\t * relationship.\n\t\t *\n\t\t * The `_links` and `_embedded` properties on the resource are made\n\t\t * non-enumerable.\n\t\t */\n\t\treturn {\n\n\t\t\tread: function (str, opts) {\n\t\t\t\tvar client, console;\n\n\t\t\t\topts = opts || {};\n\t\t\t\tclient = opts.client;\n\t\t\t\tconsole = opts.console || console;\n\n\t\t\t\tfunction deprecationWarning(relationship, deprecation) {\n\t\t\t\t\tif (deprecation && console && console.warn || console.log) {\n\t\t\t\t\t\t(console.warn || console.log).call(console, 'Relationship \\'' + relationship + '\\' is deprecated, see ' + deprecation);\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\treturn opts.registry.lookup(opts.mime.suffix).then(function (converter) {\n\t\t\t\t\treturn when(converter.read(str, opts)).then(function (root) {\n\n\t\t\t\t\t\tfind.findProperties(root, '_embedded', function (embedded, resource, name) {\n\t\t\t\t\t\t\tObject.keys(embedded).forEach(function (relationship) {\n\t\t\t\t\t\t\t\tif (relationship in resource) { return; }\n\t\t\t\t\t\t\t\tvar related = responsePromise({\n\t\t\t\t\t\t\t\t\tentity: embedded[relationship]\n\t\t\t\t\t\t\t\t});\n\t\t\t\t\t\t\t\tdefineProperty(resource, relationship, related);\n\t\t\t\t\t\t\t});\n\t\t\t\t\t\t\tdefineProperty(resource, name, embedded);\n\t\t\t\t\t\t});\n\t\t\t\t\t\tfind.findProperties(root, '_links', function (links, resource, name) {\n\t\t\t\t\t\t\tObject.keys(links).forEach(function (relationship) {\n\t\t\t\t\t\t\t\tvar link = links[relationship];\n\t\t\t\t\t\t\t\tif (relationship in resource) { return; }\n\t\t\t\t\t\t\t\tdefineProperty(resource, relationship, responsePromise.make(lazyPromise(function () {\n\t\t\t\t\t\t\t\t\tif (link.deprecation) { deprecationWarning(relationship, link.deprecation); }\n\t\t\t\t\t\t\t\t\tif (link.templated === true) {\n\t\t\t\t\t\t\t\t\t\treturn template(client)({ path: link.href });\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\treturn client({ path: link.href });\n\t\t\t\t\t\t\t\t})));\n\t\t\t\t\t\t\t});\n\t\t\t\t\t\t\tdefineProperty(resource, name, links);\n\t\t\t\t\t\t\tdefineProperty(resource, 'clientFor', function (relationship, clientOverride) {\n\t\t\t\t\t\t\t\tvar link = links[relationship];\n\t\t\t\t\t\t\t\tif (!link) {\n\t\t\t\t\t\t\t\t\tthrow new Error('Unknown relationship: ' + relationship);\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\tif (link.deprecation) { deprecationWarning(relationship, link.deprecation); }\n\t\t\t\t\t\t\t\tif (link.templated === true) {\n\t\t\t\t\t\t\t\t\treturn template(\n\t\t\t\t\t\t\t\t\t\tclientOverride || client,\n\t\t\t\t\t\t\t\t\t\t{ template: link.href }\n\t\t\t\t\t\t\t\t\t);\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\treturn pathPrefix(\n\t\t\t\t\t\t\t\t\tclientOverride || client,\n\t\t\t\t\t\t\t\t\t{ prefix: link.href }\n\t\t\t\t\t\t\t\t);\n\t\t\t\t\t\t\t});\n\t\t\t\t\t\t\tdefineProperty(resource, 'requestFor', function (relationship, request, clientOverride) {\n\t\t\t\t\t\t\t\tvar client = this.clientFor(relationship, clientOverride);\n\t\t\t\t\t\t\t\treturn client(request);\n\t\t\t\t\t\t\t});\n\t\t\t\t\t\t});\n\n\t\t\t\t\t\treturn root;\n\t\t\t\t\t});\n\t\t\t\t});\n\n\t\t\t},\n\n\t\t\twrite: function (obj, opts) {\n\t\t\t\treturn opts.registry.lookup(opts.mime.suffix).then(function (converter) {\n\t\t\t\t\treturn converter.write(obj, opts);\n\t\t\t\t});\n\t\t\t}\n\n\t\t};\n\t});\n\n}(\n\ttypeof define === 'function' && define.amd ? define : function (factory) { module.exports = factory(require); }\n\t// Boilerplate for AMD and Node\n));\n\n},{\"../../../interceptor/pathPrefix\":12,\"../../../interceptor/template\":13,\"../../../util/find\":39,\"../../../util/lazyPromise\":40,\"../../../util/responsePromise\":43,\"when\":38}],17:[function(require,module,exports){\n/*\n * Copyright 2012-2015 the original author or authors\n * @license MIT, see LICENSE.txt for details\n *\n * @author Scott Andrews\n */\n\n(function (define) {\n\t'use strict';\n\n\tdefine(function (/* require */) {\n\n\t\t/**\n\t\t * Create a new JSON converter with custom reviver/replacer.\n\t\t *\n\t\t * The extended converter must be published to a MIME registry in order\n\t\t * to be used. The existing converter will not be modified.\n\t\t *\n\t\t * @see https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/JSON\n\t\t *\n\t\t * @param {function} [reviver=undefined] custom JSON.parse reviver\n\t\t * @param {function|Array} [replacer=undefined] custom JSON.stringify replacer\n\t\t */\n\t\tfunction createConverter(reviver, replacer) {\n\t\t\treturn {\n\n\t\t\t\tread: function (str) {\n\t\t\t\t\treturn JSON.parse(str, reviver);\n\t\t\t\t},\n\n\t\t\t\twrite: function (obj) {\n\t\t\t\t\treturn JSON.stringify(obj, replacer);\n\t\t\t\t},\n\n\t\t\t\textend: createConverter\n\n\t\t\t};\n\t\t}\n\n\t\treturn createConverter();\n\n\t});\n\n}(\n\ttypeof define === 'function' && define.amd ? define : function (factory) { module.exports = factory(require); }\n\t// Boilerplate for AMD and Node\n));\n\n},{}],18:[function(require,module,exports){\n/*\n * Copyright 2012 the original author or authors\n * @license MIT, see LICENSE.txt for details\n *\n * @author Scott Andrews\n */\n\n(function (define) {\n\t'use strict';\n\n\tdefine(function (/* require */) {\n\n\t\tvar encodedSpaceRE, urlEncodedSpaceRE;\n\n\t\tencodedSpaceRE = /%20/g;\n\t\turlEncodedSpaceRE = /\\+/g;\n\n\t\tfunction urlEncode(str) {\n\t\t\tstr = encodeURIComponent(str);\n\t\t\t// spec says space should be encoded as '+'\n\t\t\treturn str.replace(encodedSpaceRE, '+');\n\t\t}\n\n\t\tfunction urlDecode(str) {\n\t\t\t// spec says space should be encoded as '+'\n\t\t\tstr = str.replace(urlEncodedSpaceRE, ' ');\n\t\t\treturn decodeURIComponent(str);\n\t\t}\n\n\t\tfunction append(str, name, value) {\n\t\t\tif (Array.isArray(value)) {\n\t\t\t\tvalue.forEach(function (value) {\n\t\t\t\t\tstr = append(str, name, value);\n\t\t\t\t});\n\t\t\t}\n\t\t\telse {\n\t\t\t\tif (str.length > 0) {\n\t\t\t\t\tstr += '&';\n\t\t\t\t}\n\t\t\t\tstr += urlEncode(name);\n\t\t\t\tif (value !== undefined && value !== null) {\n\t\t\t\t\tstr += '=' + urlEncode(value);\n\t\t\t\t}\n\t\t\t}\n\t\t\treturn str;\n\t\t}\n\n\t\treturn {\n\n\t\t\tread: function (str) {\n\t\t\t\tvar obj = {};\n\t\t\t\tstr.split('&').forEach(function (entry) {\n\t\t\t\t\tvar pair, name, value;\n\t\t\t\t\tpair = entry.split('=');\n\t\t\t\t\tname = urlDecode(pair[0]);\n\t\t\t\t\tif (pair.length === 2) {\n\t\t\t\t\t\tvalue = urlDecode(pair[1]);\n\t\t\t\t\t}\n\t\t\t\t\telse {\n\t\t\t\t\t\tvalue = null;\n\t\t\t\t\t}\n\t\t\t\t\tif (name in obj) {\n\t\t\t\t\t\tif (!Array.isArray(obj[name])) {\n\t\t\t\t\t\t\t// convert to an array, perserving currnent value\n\t\t\t\t\t\t\tobj[name] = [obj[name]];\n\t\t\t\t\t\t}\n\t\t\t\t\t\tobj[name].push(value);\n\t\t\t\t\t}\n\t\t\t\t\telse {\n\t\t\t\t\t\tobj[name] = value;\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\t\treturn obj;\n\t\t\t},\n\n\t\t\twrite: function (obj) {\n\t\t\t\tvar str = '';\n\t\t\t\tObject.keys(obj).forEach(function (name) {\n\t\t\t\t\tstr = append(str, name, obj[name]);\n\t\t\t\t});\n\t\t\t\treturn str;\n\t\t\t}\n\n\t\t};\n\t});\n\n}(\n\ttypeof define === 'function' && define.amd ? define : function (factory) { module.exports = factory(require); }\n\t// Boilerplate for AMD and Node\n));\n\n},{}],19:[function(require,module,exports){\n/*\n * Copyright 2014 the original author or authors\n * @license MIT, see LICENSE.txt for details\n *\n * @author Michael Jackson\n */\n\n/* global FormData, File, Blob */\n\n(function (define) {\n\t'use strict';\n\n\tdefine(function (/* require */) {\n\n\t\tfunction isFormElement(object) {\n\t\t\treturn object &&\n\t\t\t\tobject.nodeType === 1 && // Node.ELEMENT_NODE\n\t\t\t\tobject.tagName === 'FORM';\n\t\t}\n\n\t\tfunction createFormDataFromObject(object) {\n\t\t\tvar formData = new FormData();\n\n\t\t\tvar value;\n\t\t\tfor (var property in object) {\n\t\t\t\tif (object.hasOwnProperty(property)) {\n\t\t\t\t\tvalue = object[property];\n\n\t\t\t\t\tif (value instanceof File) {\n\t\t\t\t\t\tformData.append(property, value, value.name);\n\t\t\t\t\t} else if (value instanceof Blob) {\n\t\t\t\t\t\tformData.append(property, value);\n\t\t\t\t\t} else {\n\t\t\t\t\t\tformData.append(property, String(value));\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\n\t\t\treturn formData;\n\t\t}\n\n\t\treturn {\n\n\t\t\twrite: function (object) {\n\t\t\t\tif (typeof FormData === 'undefined') {\n\t\t\t\t\tthrow new Error('The multipart/form-data mime serializer requires FormData support');\n\t\t\t\t}\n\n\t\t\t\t// Support FormData directly.\n\t\t\t\tif (object instanceof FormData) {\n\t\t\t\t\treturn object;\n\t\t\t\t}\n\n\t\t\t\t// Support <form> elements.\n\t\t\t\tif (isFormElement(object)) {\n\t\t\t\t\treturn new FormData(object);\n\t\t\t\t}\n\n\t\t\t\t// Support plain objects, may contain File/Blob as value.\n\t\t\t\tif (typeof object === 'object' && object !== null) {\n\t\t\t\t\treturn createFormDataFromObject(object);\n\t\t\t\t}\n\n\t\t\t\tthrow new Error('Unable to create FormData from object ' + object);\n\t\t\t}\n\n\t\t};\n\t});\n\n}(\n\ttypeof define === 'function' && define.amd ? define : function (factory) { module.exports = factory(require); }\n\t// Boilerplate for AMD and Node\n));\n\n},{}],20:[function(require,module,exports){\n/*\n * Copyright 2012 the original author or authors\n * @license MIT, see LICENSE.txt for details\n *\n * @author Scott Andrews\n */\n\n(function (define) {\n\t'use strict';\n\n\tdefine(function (/* require */) {\n\n\t\treturn {\n\n\t\t\tread: function (str) {\n\t\t\t\treturn str;\n\t\t\t},\n\n\t\t\twrite: function (obj) {\n\t\t\t\treturn obj.toString();\n\t\t\t}\n\n\t\t};\n\t});\n\n}(\n\ttypeof define === 'function' && define.amd ? define : function (factory) { module.exports = factory(require); }\n\t// Boilerplate for AMD and Node\n));\n\n},{}],21:[function(require,module,exports){\n/** @license MIT License (c) copyright 2010-2014 original author or authors */\n/** @author Brian Cavalier */\n/** @author John Hann */\n\n(function(define) { 'use strict';\ndefine(function (require) {\n\n\tvar makePromise = require('./makePromise');\n\tvar Scheduler = require('./Scheduler');\n\tvar async = require('./env').asap;\n\n\treturn makePromise({\n\t\tscheduler: new Scheduler(async)\n\t});\n\n});\n})(typeof define === 'function' && define.amd ? define : function (factory) { module.exports = factory(require); });\n\n},{\"./Scheduler\":22,\"./env\":34,\"./makePromise\":36}],22:[function(require,module,exports){\n/** @license MIT License (c) copyright 2010-2014 original author or authors */\n/** @author Brian Cavalier */\n/** @author John Hann */\n\n(function(define) { 'use strict';\ndefine(function() {\n\n\t// Credit to Twisol (https://github.com/Twisol) for suggesting\n\t// this type of extensible queue + trampoline approach for next-tick conflation.\n\n\t/**\n\t * Async task scheduler\n\t * @param {function} async function to schedule a single async function\n\t * @constructor\n\t */\n\tfunction Scheduler(async) {\n\t\tthis._async = async;\n\t\tthis._running = false;\n\n\t\tthis._queue = this;\n\t\tthis._queueLen = 0;\n\t\tthis._afterQueue = {};\n\t\tthis._afterQueueLen = 0;\n\n\t\tvar self = this;\n\t\tthis.drain = function() {\n\t\t\tself._drain();\n\t\t};\n\t}\n\n\t/**\n\t * Enqueue a task\n\t * @param {{ run:function }} task\n\t */\n\tScheduler.prototype.enqueue = function(task) {\n\t\tthis._queue[this._queueLen++] = task;\n\t\tthis.run();\n\t};\n\n\t/**\n\t * Enqueue a task to run after the main task queue\n\t * @param {{ run:function }} task\n\t */\n\tScheduler.prototype.afterQueue = function(task) {\n\t\tthis._afterQueue[this._afterQueueLen++] = task;\n\t\tthis.run();\n\t};\n\n\tScheduler.prototype.run = function() {\n\t\tif (!this._running) {\n\t\t\tthis._running = true;\n\t\t\tthis._async(this.drain);\n\t\t}\n\t};\n\n\t/**\n\t * Drain the handler queue entirely, and then the after queue\n\t */\n\tScheduler.prototype._drain = function() {\n\t\tvar i = 0;\n\t\tfor (; i < this._queueLen; ++i) {\n\t\t\tthis._queue[i].run();\n\t\t\tthis._queue[i] = void 0;\n\t\t}\n\n\t\tthis._queueLen = 0;\n\t\tthis._running = false;\n\n\t\tfor (i = 0; i < this._afterQueueLen; ++i) {\n\t\t\tthis._afterQueue[i].run();\n\t\t\tthis._afterQueue[i] = void 0;\n\t\t}\n\n\t\tthis._afterQueueLen = 0;\n\t};\n\n\treturn Scheduler;\n\n});\n}(typeof define === 'function' && define.amd ? define : function(factory) { module.exports = factory(); }));\n\n},{}],23:[function(require,module,exports){\n/** @license MIT License (c) copyright 2010-2014 original author or authors */\n/** @author Brian Cavalier */\n/** @author John Hann */\n\n(function(define) { 'use strict';\ndefine(function() {\n\n\t/**\n\t * Custom error type for promises rejected by promise.timeout\n\t * @param {string} message\n\t * @constructor\n\t */\n\tfunction TimeoutError (message) {\n\t\tError.call(this);\n\t\tthis.message = message;\n\t\tthis.name = TimeoutError.name;\n\t\tif (typeof Error.captureStackTrace === 'function') {\n\t\t\tError.captureStackTrace(this, TimeoutError);\n\t\t}\n\t}\n\n\tTimeoutError.prototype = Object.create(Error.prototype);\n\tTimeoutError.prototype.constructor = TimeoutError;\n\n\treturn TimeoutError;\n});\n}(typeof define === 'function' && define.amd ? define : function(factory) { module.exports = factory(); }));\n},{}],24:[function(require,module,exports){\n/** @license MIT License (c) copyright 2010-2014 original author or authors */\n/** @author Brian Cavalier */\n/** @author John Hann */\n\n(function(define) { 'use strict';\ndefine(function() {\n\n\tmakeApply.tryCatchResolve = tryCatchResolve;\n\n\treturn makeApply;\n\n\tfunction makeApply(Promise, call) {\n\t\tif(arguments.length < 2) {\n\t\t\tcall = tryCatchResolve;\n\t\t}\n\n\t\treturn apply;\n\n\t\tfunction apply(f, thisArg, args) {\n\t\t\tvar p = Promise._defer();\n\t\t\tvar l = args.length;\n\t\t\tvar params = new Array(l);\n\t\t\tcallAndResolve({ f:f, thisArg:thisArg, args:args, params:params, i:l-1, call:call }, p._handler);\n\n\t\t\treturn p;\n\t\t}\n\n\t\tfunction callAndResolve(c, h) {\n\t\t\tif(c.i < 0) {\n\t\t\t\treturn call(c.f, c.thisArg, c.params, h);\n\t\t\t}\n\n\t\t\tvar handler = Promise._handler(c.args[c.i]);\n\t\t\thandler.fold(callAndResolveNext, c, void 0, h);\n\t\t}\n\n\t\tfunction callAndResolveNext(c, x, h) {\n\t\t\tc.params[c.i] = x;\n\t\t\tc.i -= 1;\n\t\t\tcallAndResolve(c, h);\n\t\t}\n\t}\n\n\tfunction tryCatchResolve(f, thisArg, args, resolver) {\n\t\ttry {\n\t\t\tresolver.resolve(f.apply(thisArg, args));\n\t\t} catch(e) {\n\t\t\tresolver.reject(e);\n\t\t}\n\t}\n\n});\n}(typeof define === 'function' && define.amd ? define : function(factory) { module.exports = factory(); }));\n\n\n\n},{}],25:[function(require,module,exports){\n/** @license MIT License (c) copyright 2010-2014 original author or authors */\n/** @author Brian Cavalier */\n/** @author John Hann */\n\n(function(define) { 'use strict';\ndefine(function(require) {\n\n\tvar state = require('../state');\n\tvar applier = require('../apply');\n\n\treturn function array(Promise) {\n\n\t\tvar applyFold = applier(Promise);\n\t\tvar toPromise = Promise.resolve;\n\t\tvar all = Promise.all;\n\n\t\tvar ar = Array.prototype.reduce;\n\t\tvar arr = Array.prototype.reduceRight;\n\t\tvar slice = Array.prototype.slice;\n\n\t\t// Additional array combinators\n\n\t\tPromise.any = any;\n\t\tPromise.some = some;\n\t\tPromise.settle = settle;\n\n\t\tPromise.map = map;\n\t\tPromise.filter = filter;\n\t\tPromise.reduce = reduce;\n\t\tPromise.reduceRight = reduceRight;\n\n\t\t/**\n\t\t * When this promise fulfills with an array, do\n\t\t * onFulfilled.apply(void 0, array)\n\t\t * @param {function} onFulfilled function to apply\n\t\t * @returns {Promise} promise for the result of applying onFulfilled\n\t\t */\n\t\tPromise.prototype.spread = function(onFulfilled) {\n\t\t\treturn this.then(all).then(function(array) {\n\t\t\t\treturn onFulfilled.apply(this, array);\n\t\t\t});\n\t\t};\n\n\t\treturn Promise;\n\n\t\t/**\n\t\t * One-winner competitive race.\n\t\t * Return a promise that will fulfill when one of the promises\n\t\t * in the input array fulfills, or will reject when all promises\n\t\t * have rejected.\n\t\t * @param {array} promises\n\t\t * @returns {Promise} promise for the first fulfilled value\n\t\t */\n\t\tfunction any(promises) {\n\t\t\tvar p = Promise._defer();\n\t\t\tvar resolver = p._handler;\n\t\t\tvar l = promises.length>>>0;\n\n\t\t\tvar pending = l;\n\t\t\tvar errors = [];\n\n\t\t\tfor (var h, x, i = 0; i < l; ++i) {\n\t\t\t\tx = promises[i];\n\t\t\t\tif(x === void 0 && !(i in promises)) {\n\t\t\t\t\t--pending;\n\t\t\t\t\tcontinue;\n\t\t\t\t}\n\n\t\t\t\th = Promise._handler(x);\n\t\t\t\tif(h.state() > 0) {\n\t\t\t\t\tresolver.become(h);\n\t\t\t\t\tPromise._visitRemaining(promises, i, h);\n\t\t\t\t\tbreak;\n\t\t\t\t} else {\n\t\t\t\t\th.visit(resolver, handleFulfill, handleReject);\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tif(pending === 0) {\n\t\t\t\tresolver.reject(new RangeError('any(): array must not be empty'));\n\t\t\t}\n\n\t\t\treturn p;\n\n\t\t\tfunction handleFulfill(x) {\n\t\t\t\t/*jshint validthis:true*/\n\t\t\t\terrors = null;\n\t\t\t\tthis.resolve(x); // this === resolver\n\t\t\t}\n\n\t\t\tfunction handleReject(e) {\n\t\t\t\t/*jshint validthis:true*/\n\t\t\t\tif(this.resolved) { // this === resolver\n\t\t\t\t\treturn;\n\t\t\t\t}\n\n\t\t\t\terrors.push(e);\n\t\t\t\tif(--pending === 0) {\n\t\t\t\t\tthis.reject(errors);\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\t/**\n\t\t * N-winner competitive race\n\t\t * Return a promise that will fulfill when n input promises have\n\t\t * fulfilled, or will reject when it becomes impossible for n\n\t\t * input promises to fulfill (ie when promises.length - n + 1\n\t\t * have rejected)\n\t\t * @param {array} promises\n\t\t * @param {number} n\n\t\t * @returns {Promise} promise for the earliest n fulfillment values\n\t\t *\n\t\t * @deprecated\n\t\t */\n\t\tfunction some(promises, n) {\n\t\t\t/*jshint maxcomplexity:7*/\n\t\t\tvar p = Promise._defer();\n\t\t\tvar resolver = p._handler;\n\n\t\t\tvar results = [];\n\t\t\tvar errors = [];\n\n\t\t\tvar l = promises.length>>>0;\n\t\t\tvar nFulfill = 0;\n\t\t\tvar nReject;\n\t\t\tvar x, i; // reused in both for() loops\n\n\t\t\t// First pass: count actual array items\n\t\t\tfor(i=0; i<l; ++i) {\n\t\t\t\tx = promises[i];\n\t\t\t\tif(x === void 0 && !(i in promises)) {\n\t\t\t\t\tcontinue;\n\t\t\t\t}\n\t\t\t\t++nFulfill;\n\t\t\t}\n\n\t\t\t// Compute actual goals\n\t\t\tn = Math.max(n, 0);\n\t\t\tnReject = (nFulfill - n + 1);\n\t\t\tnFulfill = Math.min(n, nFulfill);\n\n\t\t\tif(n > nFulfill) {\n\t\t\t\tresolver.reject(new RangeError('some(): array must contain at least '\n\t\t\t\t+ n + ' item(s), but had ' + nFulfill));\n\t\t\t} else if(nFulfill === 0) {\n\t\t\t\tresolver.resolve(results);\n\t\t\t}\n\n\t\t\t// Second pass: observe each array item, make progress toward goals\n\t\t\tfor(i=0; i<l; ++i) {\n\t\t\t\tx = promises[i];\n\t\t\t\tif(x === void 0 && !(i in promises)) {\n\t\t\t\t\tcontinue;\n\t\t\t\t}\n\n\t\t\t\tPromise._handler(x).visit(resolver, fulfill, reject, resolver.notify);\n\t\t\t}\n\n\t\t\treturn p;\n\n\t\t\tfunction fulfill(x) {\n\t\t\t\t/*jshint validthis:true*/\n\t\t\t\tif(this.resolved) { // this === resolver\n\t\t\t\t\treturn;\n\t\t\t\t}\n\n\t\t\t\tresults.push(x);\n\t\t\t\tif(--nFulfill === 0) {\n\t\t\t\t\terrors = null;\n\t\t\t\t\tthis.resolve(results);\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tfunction reject(e) {\n\t\t\t\t/*jshint validthis:true*/\n\t\t\t\tif(this.resolved) { // this === resolver\n\t\t\t\t\treturn;\n\t\t\t\t}\n\n\t\t\t\terrors.push(e);\n\t\t\t\tif(--nReject === 0) {\n\t\t\t\t\tresults = null;\n\t\t\t\t\tthis.reject(errors);\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\t/**\n\t\t * Apply f to the value of each promise in a list of promises\n\t\t * and return a new list containing the results.\n\t\t * @param {array} promises\n\t\t * @param {function(x:*, index:Number):*} f mapping function\n\t\t * @returns {Promise}\n\t\t */\n\t\tfunction map(promises, f) {\n\t\t\treturn Promise._traverse(f, promises);\n\t\t}\n\n\t\t/**\n\t\t * Filter the provided array of promises using the provided predicate.  Input may\n\t\t * contain promises and values\n\t\t * @param {Array} promises array of promises and values\n\t\t * @param {function(x:*, index:Number):boolean} predicate filtering predicate.\n\t\t *  Must return truthy (or promise for truthy) for items to retain.\n\t\t * @returns {Promise} promise that will fulfill with an array containing all items\n\t\t *  for which predicate returned truthy.\n\t\t */\n\t\tfunction filter(promises, predicate) {\n\t\t\tvar a = slice.call(promises);\n\t\t\treturn Promise._traverse(predicate, a).then(function(keep) {\n\t\t\t\treturn filterSync(a, keep);\n\t\t\t});\n\t\t}\n\n\t\tfunction filterSync(promises, keep) {\n\t\t\t// Safe because we know all promises have fulfilled if we've made it this far\n\t\t\tvar l = keep.length;\n\t\t\tvar filtered = new Array(l);\n\t\t\tfor(var i=0, j=0; i<l; ++i) {\n\t\t\t\tif(keep[i]) {\n\t\t\t\t\tfiltered[j++] = Promise._handler(promises[i]).value;\n\t\t\t\t}\n\t\t\t}\n\t\t\tfiltered.length = j;\n\t\t\treturn filtered;\n\n\t\t}\n\n\t\t/**\n\t\t * Return a promise that will always fulfill with an array containing\n\t\t * the outcome states of all input promises.  The returned promise\n\t\t * will never reject.\n\t\t * @param {Array} promises\n\t\t * @returns {Promise} promise for array of settled state descriptors\n\t\t */\n\t\tfunction settle(promises) {\n\t\t\treturn all(promises.map(settleOne));\n\t\t}\n\n\t\tfunction settleOne(p) {\n\t\t\tvar h = Promise._handler(p);\n\t\t\tif(h.state() === 0) {\n\t\t\t\treturn toPromise(p).then(state.fulfilled, state.rejected);\n\t\t\t}\n\n\t\t\th._unreport();\n\t\t\treturn state.inspect(h);\n\t\t}\n\n\t\t/**\n\t\t * Traditional reduce function, similar to `Array.prototype.reduce()`, but\n\t\t * input may contain promises and/or values, and reduceFunc\n\t\t * may return either a value or a promise, *and* initialValue may\n\t\t * be a promise for the starting value.\n\t\t * @param {Array|Promise} promises array or promise for an array of anything,\n\t\t *      may contain a mix of promises and values.\n\t\t * @param {function(accumulated:*, x:*, index:Number):*} f reduce function\n\t\t * @returns {Promise} that will resolve to the final reduced value\n\t\t */\n\t\tfunction reduce(promises, f /*, initialValue */) {\n\t\t\treturn arguments.length > 2 ? ar.call(promises, liftCombine(f), arguments[2])\n\t\t\t\t\t: ar.call(promises, liftCombine(f));\n\t\t}\n\n\t\t/**\n\t\t * Traditional reduce function, similar to `Array.prototype.reduceRight()`, but\n\t\t * input may contain promises and/or values, and reduceFunc\n\t\t * may return either a value or a promise, *and* initialValue may\n\t\t * be a promise for the starting value.\n\t\t * @param {Array|Promise} promises array or promise for an array of anything,\n\t\t *      may contain a mix of promises and values.\n\t\t * @param {function(accumulated:*, x:*, index:Number):*} f reduce function\n\t\t * @returns {Promise} that will resolve to the final reduced value\n\t\t */\n\t\tfunction reduceRight(promises, f /*, initialValue */) {\n\t\t\treturn arguments.length > 2 ? arr.call(promises, liftCombine(f), arguments[2])\n\t\t\t\t\t: arr.call(promises, liftCombine(f));\n\t\t}\n\n\t\tfunction liftCombine(f) {\n\t\t\treturn function(z, x, i) {\n\t\t\t\treturn applyFold(f, void 0, [z,x,i]);\n\t\t\t};\n\t\t}\n\t};\n\n});\n}(typeof define === 'function' && define.amd ? define : function(factory) { module.exports = factory(require); }));\n\n},{\"../apply\":24,\"../state\":37}],26:[function(require,module,exports){\n/** @license MIT License (c) copyright 2010-2014 original author or authors */\n/** @author Brian Cavalier */\n/** @author John Hann */\n\n(function(define) { 'use strict';\ndefine(function() {\n\n\treturn function flow(Promise) {\n\n\t\tvar resolve = Promise.resolve;\n\t\tvar reject = Promise.reject;\n\t\tvar origCatch = Promise.prototype['catch'];\n\n\t\t/**\n\t\t * Handle the ultimate fulfillment value or rejection reason, and assume\n\t\t * responsibility for all errors.  If an error propagates out of result\n\t\t * or handleFatalError, it will be rethrown to the host, resulting in a\n\t\t * loud stack track on most platforms and a crash on some.\n\t\t * @param {function?} onResult\n\t\t * @param {function?} onError\n\t\t * @returns {undefined}\n\t\t */\n\t\tPromise.prototype.done = function(onResult, onError) {\n\t\t\tthis._handler.visit(this._handler.receiver, onResult, onError);\n\t\t};\n\n\t\t/**\n\t\t * Add Error-type and predicate matching to catch.  Examples:\n\t\t * promise.catch(TypeError, handleTypeError)\n\t\t *   .catch(predicate, handleMatchedErrors)\n\t\t *   .catch(handleRemainingErrors)\n\t\t * @param onRejected\n\t\t * @returns {*}\n\t\t */\n\t\tPromise.prototype['catch'] = Promise.prototype.otherwise = function(onRejected) {\n\t\t\tif (arguments.length < 2) {\n\t\t\t\treturn origCatch.call(this, onRejected);\n\t\t\t}\n\n\t\t\tif(typeof onRejected !== 'function') {\n\t\t\t\treturn this.ensure(rejectInvalidPredicate);\n\t\t\t}\n\n\t\t\treturn origCatch.call(this, createCatchFilter(arguments[1], onRejected));\n\t\t};\n\n\t\t/**\n\t\t * Wraps the provided catch handler, so that it will only be called\n\t\t * if the predicate evaluates truthy\n\t\t * @param {?function} handler\n\t\t * @param {function} predicate\n\t\t * @returns {function} conditional catch handler\n\t\t */\n\t\tfunction createCatchFilter(handler, predicate) {\n\t\t\treturn function(e) {\n\t\t\t\treturn evaluatePredicate(e, predicate)\n\t\t\t\t\t? handler.call(this, e)\n\t\t\t\t\t: reject(e);\n\t\t\t};\n\t\t}\n\n\t\t/**\n\t\t * Ensures that onFulfilledOrRejected will be called regardless of whether\n\t\t * this promise is fulfilled or rejected.  onFulfilledOrRejected WILL NOT\n\t\t * receive the promises' value or reason.  Any returned value will be disregarded.\n\t\t * onFulfilledOrRejected may throw or return a rejected promise to signal\n\t\t * an additional error.\n\t\t * @param {function} handler handler to be called regardless of\n\t\t *  fulfillment or rejection\n\t\t * @returns {Promise}\n\t\t */\n\t\tPromise.prototype['finally'] = Promise.prototype.ensure = function(handler) {\n\t\t\tif(typeof handler !== 'function') {\n\t\t\t\treturn this;\n\t\t\t}\n\n\t\t\treturn this.then(function(x) {\n\t\t\t\treturn runSideEffect(handler, this, identity, x);\n\t\t\t}, function(e) {\n\t\t\t\treturn runSideEffect(handler, this, reject, e);\n\t\t\t});\n\t\t};\n\n\t\tfunction runSideEffect (handler, thisArg, propagate, value) {\n\t\t\tvar result = handler.call(thisArg);\n\t\t\treturn maybeThenable(result)\n\t\t\t\t? propagateValue(result, propagate, value)\n\t\t\t\t: propagate(value);\n\t\t}\n\n\t\tfunction propagateValue (result, propagate, x) {\n\t\t\treturn resolve(result).then(function () {\n\t\t\t\treturn propagate(x);\n\t\t\t});\n\t\t}\n\n\t\t/**\n\t\t * Recover from a failure by returning a defaultValue.  If defaultValue\n\t\t * is a promise, it's fulfillment value will be used.  If defaultValue is\n\t\t * a promise that rejects, the returned promise will reject with the\n\t\t * same reason.\n\t\t * @param {*} defaultValue\n\t\t * @returns {Promise} new promise\n\t\t */\n\t\tPromise.prototype['else'] = Promise.prototype.orElse = function(defaultValue) {\n\t\t\treturn this.then(void 0, function() {\n\t\t\t\treturn defaultValue;\n\t\t\t});\n\t\t};\n\n\t\t/**\n\t\t * Shortcut for .then(function() { return value; })\n\t\t * @param  {*} value\n\t\t * @return {Promise} a promise that:\n\t\t *  - is fulfilled if value is not a promise, or\n\t\t *  - if value is a promise, will fulfill with its value, or reject\n\t\t *    with its reason.\n\t\t */\n\t\tPromise.prototype['yield'] = function(value) {\n\t\t\treturn this.then(function() {\n\t\t\t\treturn value;\n\t\t\t});\n\t\t};\n\n\t\t/**\n\t\t * Runs a side effect when this promise fulfills, without changing the\n\t\t * fulfillment value.\n\t\t * @param {function} onFulfilledSideEffect\n\t\t * @returns {Promise}\n\t\t */\n\t\tPromise.prototype.tap = function(onFulfilledSideEffect) {\n\t\t\treturn this.then(onFulfilledSideEffect)['yield'](this);\n\t\t};\n\n\t\treturn Promise;\n\t};\n\n\tfunction rejectInvalidPredicate() {\n\t\tthrow new TypeError('catch predicate must be a function');\n\t}\n\n\tfunction evaluatePredicate(e, predicate) {\n\t\treturn isError(predicate) ? e instanceof predicate : predicate(e);\n\t}\n\n\tfunction isError(predicate) {\n\t\treturn predicate === Error\n\t\t\t|| (predicate != null && predicate.prototype instanceof Error);\n\t}\n\n\tfunction maybeThenable(x) {\n\t\treturn (typeof x === 'object' || typeof x === 'function') && x !== null;\n\t}\n\n\tfunction identity(x) {\n\t\treturn x;\n\t}\n\n});\n}(typeof define === 'function' && define.amd ? define : function(factory) { module.exports = factory(); }));\n\n},{}],27:[function(require,module,exports){\n/** @license MIT License (c) copyright 2010-2014 original author or authors */\n/** @author Brian Cavalier */\n/** @author John Hann */\n/** @author Jeff Escalante */\n\n(function(define) { 'use strict';\ndefine(function() {\n\n\treturn function fold(Promise) {\n\n\t\tPromise.prototype.fold = function(f, z) {\n\t\t\tvar promise = this._beget();\n\n\t\t\tthis._handler.fold(function(z, x, to) {\n\t\t\t\tPromise._handler(z).fold(function(x, z, to) {\n\t\t\t\t\tto.resolve(f.call(this, z, x));\n\t\t\t\t}, x, this, to);\n\t\t\t}, z, promise._handler.receiver, promise._handler);\n\n\t\t\treturn promise;\n\t\t};\n\n\t\treturn Promise;\n\t};\n\n});\n}(typeof define === 'function' && define.amd ? define : function(factory) { module.exports = factory(); }));\n\n},{}],28:[function(require,module,exports){\n/** @license MIT License (c) copyright 2010-2014 original author or authors */\n/** @author Brian Cavalier */\n/** @author John Hann */\n\n(function(define) { 'use strict';\ndefine(function(require) {\n\n\tvar inspect = require('../state').inspect;\n\n\treturn function inspection(Promise) {\n\n\t\tPromise.prototype.inspect = function() {\n\t\t\treturn inspect(Promise._handler(this));\n\t\t};\n\n\t\treturn Promise;\n\t};\n\n});\n}(typeof define === 'function' && define.amd ? define : function(factory) { module.exports = factory(require); }));\n\n},{\"../state\":37}],29:[function(require,module,exports){\n/** @license MIT License (c) copyright 2010-2014 original author or authors */\n/** @author Brian Cavalier */\n/** @author John Hann */\n\n(function(define) { 'use strict';\ndefine(function() {\n\n\treturn function generate(Promise) {\n\n\t\tvar resolve = Promise.resolve;\n\n\t\tPromise.iterate = iterate;\n\t\tPromise.unfold = unfold;\n\n\t\treturn Promise;\n\n\t\t/**\n\t\t * @deprecated Use github.com/cujojs/most streams and most.iterate\n\t\t * Generate a (potentially infinite) stream of promised values:\n\t\t * x, f(x), f(f(x)), etc. until condition(x) returns true\n\t\t * @param {function} f function to generate a new x from the previous x\n\t\t * @param {function} condition function that, given the current x, returns\n\t\t *  truthy when the iterate should stop\n\t\t * @param {function} handler function to handle the value produced by f\n\t\t * @param {*|Promise} x starting value, may be a promise\n\t\t * @return {Promise} the result of the last call to f before\n\t\t *  condition returns true\n\t\t */\n\t\tfunction iterate(f, condition, handler, x) {\n\t\t\treturn unfold(function(x) {\n\t\t\t\treturn [x, f(x)];\n\t\t\t}, condition, handler, x);\n\t\t}\n\n\t\t/**\n\t\t * @deprecated Use github.com/cujojs/most streams and most.unfold\n\t\t * Generate a (potentially infinite) stream of promised values\n\t\t * by applying handler(generator(seed)) iteratively until\n\t\t * condition(seed) returns true.\n\t\t * @param {function} unspool function that generates a [value, newSeed]\n\t\t *  given a seed.\n\t\t * @param {function} condition function that, given the current seed, returns\n\t\t *  truthy when the unfold should stop\n\t\t * @param {function} handler function to handle the value produced by unspool\n\t\t * @param x {*|Promise} starting value, may be a promise\n\t\t * @return {Promise} the result of the last value produced by unspool before\n\t\t *  condition returns true\n\t\t */\n\t\tfunction unfold(unspool, condition, handler, x) {\n\t\t\treturn resolve(x).then(function(seed) {\n\t\t\t\treturn resolve(condition(seed)).then(function(done) {\n\t\t\t\t\treturn done ? seed : resolve(unspool(seed)).spread(next);\n\t\t\t\t});\n\t\t\t});\n\n\t\t\tfunction next(item, newSeed) {\n\t\t\t\treturn resolve(handler(item)).then(function() {\n\t\t\t\t\treturn unfold(unspool, condition, handler, newSeed);\n\t\t\t\t});\n\t\t\t}\n\t\t}\n\t};\n\n});\n}(typeof define === 'function' && define.amd ? define : function(factory) { module.exports = factory(); }));\n\n},{}],30:[function(require,module,exports){\n/** @license MIT License (c) copyright 2010-2014 original author or authors */\n/** @author Brian Cavalier */\n/** @author John Hann */\n\n(function(define) { 'use strict';\ndefine(function() {\n\n\treturn function progress(Promise) {\n\n\t\t/**\n\t\t * @deprecated\n\t\t * Register a progress handler for this promise\n\t\t * @param {function} onProgress\n\t\t * @returns {Promise}\n\t\t */\n\t\tPromise.prototype.progress = function(onProgress) {\n\t\t\treturn this.then(void 0, void 0, onProgress);\n\t\t};\n\n\t\treturn Promise;\n\t};\n\n});\n}(typeof define === 'function' && define.amd ? define : function(factory) { module.exports = factory(); }));\n\n},{}],31:[function(require,module,exports){\n/** @license MIT License (c) copyright 2010-2014 original author or authors */\n/** @author Brian Cavalier */\n/** @author John Hann */\n\n(function(define) { 'use strict';\ndefine(function(require) {\n\n\tvar env = require('../env');\n\tvar TimeoutError = require('../TimeoutError');\n\n\tfunction setTimeout(f, ms, x, y) {\n\t\treturn env.setTimer(function() {\n\t\t\tf(x, y, ms);\n\t\t}, ms);\n\t}\n\n\treturn function timed(Promise) {\n\t\t/**\n\t\t * Return a new promise whose fulfillment value is revealed only\n\t\t * after ms milliseconds\n\t\t * @param {number} ms milliseconds\n\t\t * @returns {Promise}\n\t\t */\n\t\tPromise.prototype.delay = function(ms) {\n\t\t\tvar p = this._beget();\n\t\t\tthis._handler.fold(handleDelay, ms, void 0, p._handler);\n\t\t\treturn p;\n\t\t};\n\n\t\tfunction handleDelay(ms, x, h) {\n\t\t\tsetTimeout(resolveDelay, ms, x, h);\n\t\t}\n\n\t\tfunction resolveDelay(x, h) {\n\t\t\th.resolve(x);\n\t\t}\n\n\t\t/**\n\t\t * Return a new promise that rejects after ms milliseconds unless\n\t\t * this promise fulfills earlier, in which case the returned promise\n\t\t * fulfills with the same value.\n\t\t * @param {number} ms milliseconds\n\t\t * @param {Error|*=} reason optional rejection reason to use, defaults\n\t\t *   to a TimeoutError if not provided\n\t\t * @returns {Promise}\n\t\t */\n\t\tPromise.prototype.timeout = function(ms, reason) {\n\t\t\tvar p = this._beget();\n\t\t\tvar h = p._handler;\n\n\t\t\tvar t = setTimeout(onTimeout, ms, reason, p._handler);\n\n\t\t\tthis._handler.visit(h,\n\t\t\t\tfunction onFulfill(x) {\n\t\t\t\t\tenv.clearTimer(t);\n\t\t\t\t\tthis.resolve(x); // this = h\n\t\t\t\t},\n\t\t\t\tfunction onReject(x) {\n\t\t\t\t\tenv.clearTimer(t);\n\t\t\t\t\tthis.reject(x); // this = h\n\t\t\t\t},\n\t\t\t\th.notify);\n\n\t\t\treturn p;\n\t\t};\n\n\t\tfunction onTimeout(reason, h, ms) {\n\t\t\tvar e = typeof reason === 'undefined'\n\t\t\t\t? new TimeoutError('timed out after ' + ms + 'ms')\n\t\t\t\t: reason;\n\t\t\th.reject(e);\n\t\t}\n\n\t\treturn Promise;\n\t};\n\n});\n}(typeof define === 'function' && define.amd ? define : function(factory) { module.exports = factory(require); }));\n\n},{\"../TimeoutError\":23,\"../env\":34}],32:[function(require,module,exports){\n/** @license MIT License (c) copyright 2010-2014 original author or authors */\n/** @author Brian Cavalier */\n/** @author John Hann */\n\n(function(define) { 'use strict';\ndefine(function(require) {\n\n\tvar setTimer = require('../env').setTimer;\n\tvar format = require('../format');\n\n\treturn function unhandledRejection(Promise) {\n\n\t\tvar logError = noop;\n\t\tvar logInfo = noop;\n\t\tvar localConsole;\n\n\t\tif(typeof console !== 'undefined') {\n\t\t\t// Alias console to prevent things like uglify's drop_console option from\n\t\t\t// removing console.log/error. Unhandled rejections fall into the same\n\t\t\t// category as uncaught exceptions, and build tools shouldn't silence them.\n\t\t\tlocalConsole = console;\n\t\t\tlogError = typeof localConsole.error !== 'undefined'\n\t\t\t\t? function (e) { localConsole.error(e); }\n\t\t\t\t: function (e) { localConsole.log(e); };\n\n\t\t\tlogInfo = typeof localConsole.info !== 'undefined'\n\t\t\t\t? function (e) { localConsole.info(e); }\n\t\t\t\t: function (e) { localConsole.log(e); };\n\t\t}\n\n\t\tPromise.onPotentiallyUnhandledRejection = function(rejection) {\n\t\t\tenqueue(report, rejection);\n\t\t};\n\n\t\tPromise.onPotentiallyUnhandledRejectionHandled = function(rejection) {\n\t\t\tenqueue(unreport, rejection);\n\t\t};\n\n\t\tPromise.onFatalRejection = function(rejection) {\n\t\t\tenqueue(throwit, rejection.value);\n\t\t};\n\n\t\tvar tasks = [];\n\t\tvar reported = [];\n\t\tvar running = null;\n\n\t\tfunction report(r) {\n\t\t\tif(!r.handled) {\n\t\t\t\treported.push(r);\n\t\t\t\tlogError('Potentially unhandled rejection [' + r.id + '] ' + format.formatError(r.value));\n\t\t\t}\n\t\t}\n\n\t\tfunction unreport(r) {\n\t\t\tvar i = reported.indexOf(r);\n\t\t\tif(i >= 0) {\n\t\t\t\treported.splice(i, 1);\n\t\t\t\tlogInfo('Handled previous rejection [' + r.id + '] ' + format.formatObject(r.value));\n\t\t\t}\n\t\t}\n\n\t\tfunction enqueue(f, x) {\n\t\t\ttasks.push(f, x);\n\t\t\tif(running === null) {\n\t\t\t\trunning = setTimer(flush, 0);\n\t\t\t}\n\t\t}\n\n\t\tfunction flush() {\n\t\t\trunning = null;\n\t\t\twhile(tasks.length > 0) {\n\t\t\t\ttasks.shift()(tasks.shift());\n\t\t\t}\n\t\t}\n\n\t\treturn Promise;\n\t};\n\n\tfunction throwit(e) {\n\t\tthrow e;\n\t}\n\n\tfunction noop() {}\n\n});\n}(typeof define === 'function' && define.amd ? define : function(factory) { module.exports = factory(require); }));\n\n},{\"../env\":34,\"../format\":35}],33:[function(require,module,exports){\n/** @license MIT License (c) copyright 2010-2014 original author or authors */\n/** @author Brian Cavalier */\n/** @author John Hann */\n\n(function(define) { 'use strict';\ndefine(function() {\n\n\treturn function addWith(Promise) {\n\t\t/**\n\t\t * Returns a promise whose handlers will be called with `this` set to\n\t\t * the supplied receiver.  Subsequent promises derived from the\n\t\t * returned promise will also have their handlers called with receiver\n\t\t * as `this`. Calling `with` with undefined or no arguments will return\n\t\t * a promise whose handlers will again be called in the usual Promises/A+\n\t\t * way (no `this`) thus safely undoing any previous `with` in the\n\t\t * promise chain.\n\t\t *\n\t\t * WARNING: Promises returned from `with`/`withThis` are NOT Promises/A+\n\t\t * compliant, specifically violating 2.2.5 (http://promisesaplus.com/#point-41)\n\t\t *\n\t\t * @param {object} receiver `this` value for all handlers attached to\n\t\t *  the returned promise.\n\t\t * @returns {Promise}\n\t\t */\n\t\tPromise.prototype['with'] = Promise.prototype.withThis = function(receiver) {\n\t\t\tvar p = this._beget();\n\t\t\tvar child = p._handler;\n\t\t\tchild.receiver = receiver;\n\t\t\tthis._handler.chain(child, receiver);\n\t\t\treturn p;\n\t\t};\n\n\t\treturn Promise;\n\t};\n\n});\n}(typeof define === 'function' && define.amd ? define : function(factory) { module.exports = factory(); }));\n\n\n},{}],34:[function(require,module,exports){\n(function (process){\n/** @license MIT License (c) copyright 2010-2014 original author or authors */\n/** @author Brian Cavalier */\n/** @author John Hann */\n\n/*global process,document,setTimeout,clearTimeout,MutationObserver,WebKitMutationObserver*/\n(function(define) { 'use strict';\ndefine(function(require) {\n\t/*jshint maxcomplexity:6*/\n\n\t// Sniff \"best\" async scheduling option\n\t// Prefer process.nextTick or MutationObserver, then check for\n\t// setTimeout, and finally vertx, since its the only env that doesn't\n\t// have setTimeout\n\n\tvar MutationObs;\n\tvar capturedSetTimeout = typeof setTimeout !== 'undefined' && setTimeout;\n\n\t// Default env\n\tvar setTimer = function(f, ms) { return setTimeout(f, ms); };\n\tvar clearTimer = function(t) { return clearTimeout(t); };\n\tvar asap = function (f) { return capturedSetTimeout(f, 0); };\n\n\t// Detect specific env\n\tif (isNode()) { // Node\n\t\tasap = function (f) { return process.nextTick(f); };\n\n\t} else if (MutationObs = hasMutationObserver()) { // Modern browser\n\t\tasap = initMutationObserver(MutationObs);\n\n\t} else if (!capturedSetTimeout) { // vert.x\n\t\tvar vertxRequire = require;\n\t\tvar vertx = vertxRequire('vertx');\n\t\tsetTimer = function (f, ms) { return vertx.setTimer(ms, f); };\n\t\tclearTimer = vertx.cancelTimer;\n\t\tasap = vertx.runOnLoop || vertx.runOnContext;\n\t}\n\n\treturn {\n\t\tsetTimer: setTimer,\n\t\tclearTimer: clearTimer,\n\t\tasap: asap\n\t};\n\n\tfunction isNode () {\n\t\treturn typeof process !== 'undefined' && process !== null &&\n\t\t\ttypeof process.nextTick === 'function';\n\t}\n\n\tfunction hasMutationObserver () {\n\t\treturn (typeof MutationObserver === 'function' && MutationObserver) ||\n\t\t\t(typeof WebKitMutationObserver === 'function' && WebKitMutationObserver);\n\t}\n\n\tfunction initMutationObserver(MutationObserver) {\n\t\tvar scheduled;\n\t\tvar node = document.createTextNode('');\n\t\tvar o = new MutationObserver(run);\n\t\to.observe(node, { characterData: true });\n\n\t\tfunction run() {\n\t\t\tvar f = scheduled;\n\t\t\tscheduled = void 0;\n\t\t\tf();\n\t\t}\n\n\t\tvar i = 0;\n\t\treturn function (f) {\n\t\t\tscheduled = f;\n\t\t\tnode.data = (i ^= 1);\n\t\t};\n\t}\n});\n}(typeof define === 'function' && define.amd ? define : function(factory) { module.exports = factory(require); }));\n\n}).call(this,require('_process'))\n},{\"_process\":2}],35:[function(require,module,exports){\n/** @license MIT License (c) copyright 2010-2014 original author or authors */\n/** @author Brian Cavalier */\n/** @author John Hann */\n\n(function(define) { 'use strict';\ndefine(function() {\n\n\treturn {\n\t\tformatError: formatError,\n\t\tformatObject: formatObject,\n\t\ttryStringify: tryStringify\n\t};\n\n\t/**\n\t * Format an error into a string.  If e is an Error and has a stack property,\n\t * it's returned.  Otherwise, e is formatted using formatObject, with a\n\t * warning added about e not being a proper Error.\n\t * @param {*} e\n\t * @returns {String} formatted string, suitable for output to developers\n\t */\n\tfunction formatError(e) {\n\t\tvar s = typeof e === 'object' && e !== null && e.stack ? e.stack : formatObject(e);\n\t\treturn e instanceof Error ? s : s + ' (WARNING: non-Error used)';\n\t}\n\n\t/**\n\t * Format an object, detecting \"plain\" objects and running them through\n\t * JSON.stringify if possible.\n\t * @param {Object} o\n\t * @returns {string}\n\t */\n\tfunction formatObject(o) {\n\t\tvar s = String(o);\n\t\tif(s === '[object Object]' && typeof JSON !== 'undefined') {\n\t\t\ts = tryStringify(o, s);\n\t\t}\n\t\treturn s;\n\t}\n\n\t/**\n\t * Try to return the result of JSON.stringify(x).  If that fails, return\n\t * defaultValue\n\t * @param {*} x\n\t * @param {*} defaultValue\n\t * @returns {String|*} JSON.stringify(x) or defaultValue\n\t */\n\tfunction tryStringify(x, defaultValue) {\n\t\ttry {\n\t\t\treturn JSON.stringify(x);\n\t\t} catch(e) {\n\t\t\treturn defaultValue;\n\t\t}\n\t}\n\n});\n}(typeof define === 'function' && define.amd ? define : function(factory) { module.exports = factory(); }));\n\n},{}],36:[function(require,module,exports){\n(function (process){\n/** @license MIT License (c) copyright 2010-2014 original author or authors */\n/** @author Brian Cavalier */\n/** @author John Hann */\n\n(function(define) { 'use strict';\ndefine(function() {\n\n\treturn function makePromise(environment) {\n\n\t\tvar tasks = environment.scheduler;\n\t\tvar emitRejection = initEmitRejection();\n\n\t\tvar objectCreate = Object.create ||\n\t\t\tfunction(proto) {\n\t\t\t\tfunction Child() {}\n\t\t\t\tChild.prototype = proto;\n\t\t\t\treturn new Child();\n\t\t\t};\n\n\t\t/**\n\t\t * Create a promise whose fate is determined by resolver\n\t\t * @constructor\n\t\t * @returns {Promise} promise\n\t\t * @name Promise\n\t\t */\n\t\tfunction Promise(resolver, handler) {\n\t\t\tthis._handler = resolver === Handler ? handler : init(resolver);\n\t\t}\n\n\t\t/**\n\t\t * Run the supplied resolver\n\t\t * @param resolver\n\t\t * @returns {Pending}\n\t\t */\n\t\tfunction init(resolver) {\n\t\t\tvar handler = new Pending();\n\n\t\t\ttry {\n\t\t\t\tresolver(promiseResolve, promiseReject, promiseNotify);\n\t\t\t} catch (e) {\n\t\t\t\tpromiseReject(e);\n\t\t\t}\n\n\t\t\treturn handler;\n\n\t\t\t/**\n\t\t\t * Transition from pre-resolution state to post-resolution state, notifying\n\t\t\t * all listeners of the ultimate fulfillment or rejection\n\t\t\t * @param {*} x resolution value\n\t\t\t */\n\t\t\tfunction promiseResolve (x) {\n\t\t\t\thandler.resolve(x);\n\t\t\t}\n\t\t\t/**\n\t\t\t * Reject this promise with reason, which will be used verbatim\n\t\t\t * @param {Error|*} reason rejection reason, strongly suggested\n\t\t\t *   to be an Error type\n\t\t\t */\n\t\t\tfunction promiseReject (reason) {\n\t\t\t\thandler.reject(reason);\n\t\t\t}\n\n\t\t\t/**\n\t\t\t * @deprecated\n\t\t\t * Issue a progress event, notifying all progress listeners\n\t\t\t * @param {*} x progress event payload to pass to all listeners\n\t\t\t */\n\t\t\tfunction promiseNotify (x) {\n\t\t\t\thandler.notify(x);\n\t\t\t}\n\t\t}\n\n\t\t// Creation\n\n\t\tPromise.resolve = resolve;\n\t\tPromise.reject = reject;\n\t\tPromise.never = never;\n\n\t\tPromise._defer = defer;\n\t\tPromise._handler = getHandler;\n\n\t\t/**\n\t\t * Returns a trusted promise. If x is already a trusted promise, it is\n\t\t * returned, otherwise returns a new trusted Promise which follows x.\n\t\t * @param  {*} x\n\t\t * @return {Promise} promise\n\t\t */\n\t\tfunction resolve(x) {\n\t\t\treturn isPromise(x) ? x\n\t\t\t\t: new Promise(Handler, new Async(getHandler(x)));\n\t\t}\n\n\t\t/**\n\t\t * Return a reject promise with x as its reason (x is used verbatim)\n\t\t * @param {*} x\n\t\t * @returns {Promise} rejected promise\n\t\t */\n\t\tfunction reject(x) {\n\t\t\treturn new Promise(Handler, new Async(new Rejected(x)));\n\t\t}\n\n\t\t/**\n\t\t * Return a promise that remains pending forever\n\t\t * @returns {Promise} forever-pending promise.\n\t\t */\n\t\tfunction never() {\n\t\t\treturn foreverPendingPromise; // Should be frozen\n\t\t}\n\n\t\t/**\n\t\t * Creates an internal {promise, resolver} pair\n\t\t * @private\n\t\t * @returns {Promise}\n\t\t */\n\t\tfunction defer() {\n\t\t\treturn new Promise(Handler, new Pending());\n\t\t}\n\n\t\t// Transformation and flow control\n\n\t\t/**\n\t\t * Transform this promise's fulfillment value, returning a new Promise\n\t\t * for the transformed result.  If the promise cannot be fulfilled, onRejected\n\t\t * is called with the reason.  onProgress *may* be called with updates toward\n\t\t * this promise's fulfillment.\n\t\t * @param {function=} onFulfilled fulfillment handler\n\t\t * @param {function=} onRejected rejection handler\n\t\t * @param {function=} onProgress @deprecated progress handler\n\t\t * @return {Promise} new promise\n\t\t */\n\t\tPromise.prototype.then = function(onFulfilled, onRejected, onProgress) {\n\t\t\tvar parent = this._handler;\n\t\t\tvar state = parent.join().state();\n\n\t\t\tif ((typeof onFulfilled !== 'function' && state > 0) ||\n\t\t\t\t(typeof onRejected !== 'function' && state < 0)) {\n\t\t\t\t// Short circuit: value will not change, simply share handler\n\t\t\t\treturn new this.constructor(Handler, parent);\n\t\t\t}\n\n\t\t\tvar p = this._beget();\n\t\t\tvar child = p._handler;\n\n\t\t\tparent.chain(child, parent.receiver, onFulfilled, onRejected, onProgress);\n\n\t\t\treturn p;\n\t\t};\n\n\t\t/**\n\t\t * If this promise cannot be fulfilled due to an error, call onRejected to\n\t\t * handle the error. Shortcut for .then(undefined, onRejected)\n\t\t * @param {function?} onRejected\n\t\t * @return {Promise}\n\t\t */\n\t\tPromise.prototype['catch'] = function(onRejected) {\n\t\t\treturn this.then(void 0, onRejected);\n\t\t};\n\n\t\t/**\n\t\t * Creates a new, pending promise of the same type as this promise\n\t\t * @private\n\t\t * @returns {Promise}\n\t\t */\n\t\tPromise.prototype._beget = function() {\n\t\t\treturn begetFrom(this._handler, this.constructor);\n\t\t};\n\n\t\tfunction begetFrom(parent, Promise) {\n\t\t\tvar child = new Pending(parent.receiver, parent.join().context);\n\t\t\treturn new Promise(Handler, child);\n\t\t}\n\n\t\t// Array combinators\n\n\t\tPromise.all = all;\n\t\tPromise.race = race;\n\t\tPromise._traverse = traverse;\n\n\t\t/**\n\t\t * Return a promise that will fulfill when all promises in the\n\t\t * input array have fulfilled, or will reject when one of the\n\t\t * promises rejects.\n\t\t * @param {array} promises array of promises\n\t\t * @returns {Promise} promise for array of fulfillment values\n\t\t */\n\t\tfunction all(promises) {\n\t\t\treturn traverseWith(snd, null, promises);\n\t\t}\n\n\t\t/**\n\t\t * Array<Promise<X>> -> Promise<Array<f(X)>>\n\t\t * @private\n\t\t * @param {function} f function to apply to each promise's value\n\t\t * @param {Array} promises array of promises\n\t\t * @returns {Promise} promise for transformed values\n\t\t */\n\t\tfunction traverse(f, promises) {\n\t\t\treturn traverseWith(tryCatch2, f, promises);\n\t\t}\n\n\t\tfunction traverseWith(tryMap, f, promises) {\n\t\t\tvar handler = typeof f === 'function' ? mapAt : settleAt;\n\n\t\t\tvar resolver = new Pending();\n\t\t\tvar pending = promises.length >>> 0;\n\t\t\tvar results = new Array(pending);\n\n\t\t\tfor (var i = 0, x; i < promises.length && !resolver.resolved; ++i) {\n\t\t\t\tx = promises[i];\n\n\t\t\t\tif (x === void 0 && !(i in promises)) {\n\t\t\t\t\t--pending;\n\t\t\t\t\tcontinue;\n\t\t\t\t}\n\n\t\t\t\ttraverseAt(promises, handler, i, x, resolver);\n\t\t\t}\n\n\t\t\tif(pending === 0) {\n\t\t\t\tresolver.become(new Fulfilled(results));\n\t\t\t}\n\n\t\t\treturn new Promise(Handler, resolver);\n\n\t\t\tfunction mapAt(i, x, resolver) {\n\t\t\t\tif(!resolver.resolved) {\n\t\t\t\t\ttraverseAt(promises, settleAt, i, tryMap(f, x, i), resolver);\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tfunction settleAt(i, x, resolver) {\n\t\t\t\tresults[i] = x;\n\t\t\t\tif(--pending === 0) {\n\t\t\t\t\tresolver.become(new Fulfilled(results));\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\tfunction traverseAt(promises, handler, i, x, resolver) {\n\t\t\tif (maybeThenable(x)) {\n\t\t\t\tvar h = getHandlerMaybeThenable(x);\n\t\t\t\tvar s = h.state();\n\n\t\t\t\tif (s === 0) {\n\t\t\t\t\th.fold(handler, i, void 0, resolver);\n\t\t\t\t} else if (s > 0) {\n\t\t\t\t\thandler(i, h.value, resolver);\n\t\t\t\t} else {\n\t\t\t\t\tresolver.become(h);\n\t\t\t\t\tvisitRemaining(promises, i+1, h);\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\thandler(i, x, resolver);\n\t\t\t}\n\t\t}\n\n\t\tPromise._visitRemaining = visitRemaining;\n\t\tfunction visitRemaining(promises, start, handler) {\n\t\t\tfor(var i=start; i<promises.length; ++i) {\n\t\t\t\tmarkAsHandled(getHandler(promises[i]), handler);\n\t\t\t}\n\t\t}\n\n\t\tfunction markAsHandled(h, handler) {\n\t\t\tif(h === handler) {\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tvar s = h.state();\n\t\t\tif(s === 0) {\n\t\t\t\th.visit(h, void 0, h._unreport);\n\t\t\t} else if(s < 0) {\n\t\t\t\th._unreport();\n\t\t\t}\n\t\t}\n\n\t\t/**\n\t\t * Fulfill-reject competitive race. Return a promise that will settle\n\t\t * to the same state as the earliest input promise to settle.\n\t\t *\n\t\t * WARNING: The ES6 Promise spec requires that race()ing an empty array\n\t\t * must return a promise that is pending forever.  This implementation\n\t\t * returns a singleton forever-pending promise, the same singleton that is\n\t\t * returned by Promise.never(), thus can be checked with ===\n\t\t *\n\t\t * @param {array} promises array of promises to race\n\t\t * @returns {Promise} if input is non-empty, a promise that will settle\n\t\t * to the same outcome as the earliest input promise to settle. if empty\n\t\t * is empty, returns a promise that will never settle.\n\t\t */\n\t\tfunction race(promises) {\n\t\t\tif(typeof promises !== 'object' || promises === null) {\n\t\t\t\treturn reject(new TypeError('non-iterable passed to race()'));\n\t\t\t}\n\n\t\t\t// Sigh, race([]) is untestable unless we return *something*\n\t\t\t// that is recognizable without calling .then() on it.\n\t\t\treturn promises.length === 0 ? never()\n\t\t\t\t : promises.length === 1 ? resolve(promises[0])\n\t\t\t\t : runRace(promises);\n\t\t}\n\n\t\tfunction runRace(promises) {\n\t\t\tvar resolver = new Pending();\n\t\t\tvar i, x, h;\n\t\t\tfor(i=0; i<promises.length; ++i) {\n\t\t\t\tx = promises[i];\n\t\t\t\tif (x === void 0 && !(i in promises)) {\n\t\t\t\t\tcontinue;\n\t\t\t\t}\n\n\t\t\t\th = getHandler(x);\n\t\t\t\tif(h.state() !== 0) {\n\t\t\t\t\tresolver.become(h);\n\t\t\t\t\tvisitRemaining(promises, i+1, h);\n\t\t\t\t\tbreak;\n\t\t\t\t} else {\n\t\t\t\t\th.visit(resolver, resolver.resolve, resolver.reject);\n\t\t\t\t}\n\t\t\t}\n\t\t\treturn new Promise(Handler, resolver);\n\t\t}\n\n\t\t// Promise internals\n\t\t// Below this, everything is @private\n\n\t\t/**\n\t\t * Get an appropriate handler for x, without checking for cycles\n\t\t * @param {*} x\n\t\t * @returns {object} handler\n\t\t */\n\t\tfunction getHandler(x) {\n\t\t\tif(isPromise(x)) {\n\t\t\t\treturn x._handler.join();\n\t\t\t}\n\t\t\treturn maybeThenable(x) ? getHandlerUntrusted(x) : new Fulfilled(x);\n\t\t}\n\n\t\t/**\n\t\t * Get a handler for thenable x.\n\t\t * NOTE: You must only call this if maybeThenable(x) == true\n\t\t * @param {object|function|Promise} x\n\t\t * @returns {object} handler\n\t\t */\n\t\tfunction getHandlerMaybeThenable(x) {\n\t\t\treturn isPromise(x) ? x._handler.join() : getHandlerUntrusted(x);\n\t\t}\n\n\t\t/**\n\t\t * Get a handler for potentially untrusted thenable x\n\t\t * @param {*} x\n\t\t * @returns {object} handler\n\t\t */\n\t\tfunction getHandlerUntrusted(x) {\n\t\t\ttry {\n\t\t\t\tvar untrustedThen = x.then;\n\t\t\t\treturn typeof untrustedThen === 'function'\n\t\t\t\t\t? new Thenable(untrustedThen, x)\n\t\t\t\t\t: new Fulfilled(x);\n\t\t\t} catch(e) {\n\t\t\t\treturn new Rejected(e);\n\t\t\t}\n\t\t}\n\n\t\t/**\n\t\t * Handler for a promise that is pending forever\n\t\t * @constructor\n\t\t */\n\t\tfunction Handler() {}\n\n\t\tHandler.prototype.when\n\t\t\t= Handler.prototype.become\n\t\t\t= Handler.prototype.notify // deprecated\n\t\t\t= Handler.prototype.fail\n\t\t\t= Handler.prototype._unreport\n\t\t\t= Handler.prototype._report\n\t\t\t= noop;\n\n\t\tHandler.prototype._state = 0;\n\n\t\tHandler.prototype.state = function() {\n\t\t\treturn this._state;\n\t\t};\n\n\t\t/**\n\t\t * Recursively collapse handler chain to find the handler\n\t\t * nearest to the fully resolved value.\n\t\t * @returns {object} handler nearest the fully resolved value\n\t\t */\n\t\tHandler.prototype.join = function() {\n\t\t\tvar h = this;\n\t\t\twhile(h.handler !== void 0) {\n\t\t\t\th = h.handler;\n\t\t\t}\n\t\t\treturn h;\n\t\t};\n\n\t\tHandler.prototype.chain = function(to, receiver, fulfilled, rejected, progress) {\n\t\t\tthis.when({\n\t\t\t\tresolver: to,\n\t\t\t\treceiver: receiver,\n\t\t\t\tfulfilled: fulfilled,\n\t\t\t\trejected: rejected,\n\t\t\t\tprogress: progress\n\t\t\t});\n\t\t};\n\n\t\tHandler.prototype.visit = function(receiver, fulfilled, rejected, progress) {\n\t\t\tthis.chain(failIfRejected, receiver, fulfilled, rejected, progress);\n\t\t};\n\n\t\tHandler.prototype.fold = function(f, z, c, to) {\n\t\t\tthis.when(new Fold(f, z, c, to));\n\t\t};\n\n\t\t/**\n\t\t * Handler that invokes fail() on any handler it becomes\n\t\t * @constructor\n\t\t */\n\t\tfunction FailIfRejected() {}\n\n\t\tinherit(Handler, FailIfRejected);\n\n\t\tFailIfRejected.prototype.become = function(h) {\n\t\t\th.fail();\n\t\t};\n\n\t\tvar failIfRejected = new FailIfRejected();\n\n\t\t/**\n\t\t * Handler that manages a queue of consumers waiting on a pending promise\n\t\t * @constructor\n\t\t */\n\t\tfunction Pending(receiver, inheritedContext) {\n\t\t\tPromise.createContext(this, inheritedContext);\n\n\t\t\tthis.consumers = void 0;\n\t\t\tthis.receiver = receiver;\n\t\t\tthis.handler = void 0;\n\t\t\tthis.resolved = false;\n\t\t}\n\n\t\tinherit(Handler, Pending);\n\n\t\tPending.prototype._state = 0;\n\n\t\tPending.prototype.resolve = function(x) {\n\t\t\tthis.become(getHandler(x));\n\t\t};\n\n\t\tPending.prototype.reject = function(x) {\n\t\t\tif(this.resolved) {\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tthis.become(new Rejected(x));\n\t\t};\n\n\t\tPending.prototype.join = function() {\n\t\t\tif (!this.resolved) {\n\t\t\t\treturn this;\n\t\t\t}\n\n\t\t\tvar h = this;\n\n\t\t\twhile (h.handler !== void 0) {\n\t\t\t\th = h.handler;\n\t\t\t\tif (h === this) {\n\t\t\t\t\treturn this.handler = cycle();\n\t\t\t\t}\n\t\t\t}\n\n\t\t\treturn h;\n\t\t};\n\n\t\tPending.prototype.run = function() {\n\t\t\tvar q = this.consumers;\n\t\t\tvar handler = this.handler;\n\t\t\tthis.handler = this.handler.join();\n\t\t\tthis.consumers = void 0;\n\n\t\t\tfor (var i = 0; i < q.length; ++i) {\n\t\t\t\thandler.when(q[i]);\n\t\t\t}\n\t\t};\n\n\t\tPending.prototype.become = function(handler) {\n\t\t\tif(this.resolved) {\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tthis.resolved = true;\n\t\t\tthis.handler = handler;\n\t\t\tif(this.consumers !== void 0) {\n\t\t\t\ttasks.enqueue(this);\n\t\t\t}\n\n\t\t\tif(this.context !== void 0) {\n\t\t\t\thandler._report(this.context);\n\t\t\t}\n\t\t};\n\n\t\tPending.prototype.when = function(continuation) {\n\t\t\tif(this.resolved) {\n\t\t\t\ttasks.enqueue(new ContinuationTask(continuation, this.handler));\n\t\t\t} else {\n\t\t\t\tif(this.consumers === void 0) {\n\t\t\t\t\tthis.consumers = [continuation];\n\t\t\t\t} else {\n\t\t\t\t\tthis.consumers.push(continuation);\n\t\t\t\t}\n\t\t\t}\n\t\t};\n\n\t\t/**\n\t\t * @deprecated\n\t\t */\n\t\tPending.prototype.notify = function(x) {\n\t\t\tif(!this.resolved) {\n\t\t\t\ttasks.enqueue(new ProgressTask(x, this));\n\t\t\t}\n\t\t};\n\n\t\tPending.prototype.fail = function(context) {\n\t\t\tvar c = typeof context === 'undefined' ? this.context : context;\n\t\t\tthis.resolved && this.handler.join().fail(c);\n\t\t};\n\n\t\tPending.prototype._report = function(context) {\n\t\t\tthis.resolved && this.handler.join()._report(context);\n\t\t};\n\n\t\tPending.prototype._unreport = function() {\n\t\t\tthis.resolved && this.handler.join()._unreport();\n\t\t};\n\n\t\t/**\n\t\t * Wrap another handler and force it into a future stack\n\t\t * @param {object} handler\n\t\t * @constructor\n\t\t */\n\t\tfunction Async(handler) {\n\t\t\tthis.handler = handler;\n\t\t}\n\n\t\tinherit(Handler, Async);\n\n\t\tAsync.prototype.when = function(continuation) {\n\t\t\ttasks.enqueue(new ContinuationTask(continuation, this));\n\t\t};\n\n\t\tAsync.prototype._report = function(context) {\n\t\t\tthis.join()._report(context);\n\t\t};\n\n\t\tAsync.prototype._unreport = function() {\n\t\t\tthis.join()._unreport();\n\t\t};\n\n\t\t/**\n\t\t * Handler that wraps an untrusted thenable and assimilates it in a future stack\n\t\t * @param {function} then\n\t\t * @param {{then: function}} thenable\n\t\t * @constructor\n\t\t */\n\t\tfunction Thenable(then, thenable) {\n\t\t\tPending.call(this);\n\t\t\ttasks.enqueue(new AssimilateTask(then, thenable, this));\n\t\t}\n\n\t\tinherit(Pending, Thenable);\n\n\t\t/**\n\t\t * Handler for a fulfilled promise\n\t\t * @param {*} x fulfillment value\n\t\t * @constructor\n\t\t */\n\t\tfunction Fulfilled(x) {\n\t\t\tPromise.createContext(this);\n\t\t\tthis.value = x;\n\t\t}\n\n\t\tinherit(Handler, Fulfilled);\n\n\t\tFulfilled.prototype._state = 1;\n\n\t\tFulfilled.prototype.fold = function(f, z, c, to) {\n\t\t\trunContinuation3(f, z, this, c, to);\n\t\t};\n\n\t\tFulfilled.prototype.when = function(cont) {\n\t\t\trunContinuation1(cont.fulfilled, this, cont.receiver, cont.resolver);\n\t\t};\n\n\t\tvar errorId = 0;\n\n\t\t/**\n\t\t * Handler for a rejected promise\n\t\t * @param {*} x rejection reason\n\t\t * @constructor\n\t\t */\n\t\tfunction Rejected(x) {\n\t\t\tPromise.createContext(this);\n\n\t\t\tthis.id = ++errorId;\n\t\t\tthis.value = x;\n\t\t\tthis.handled = false;\n\t\t\tthis.reported = false;\n\n\t\t\tthis._report();\n\t\t}\n\n\t\tinherit(Handler, Rejected);\n\n\t\tRejected.prototype._state = -1;\n\n\t\tRejected.prototype.fold = function(f, z, c, to) {\n\t\t\tto.become(this);\n\t\t};\n\n\t\tRejected.prototype.when = function(cont) {\n\t\t\tif(typeof cont.rejected === 'function') {\n\t\t\t\tthis._unreport();\n\t\t\t}\n\t\t\trunContinuation1(cont.rejected, this, cont.receiver, cont.resolver);\n\t\t};\n\n\t\tRejected.prototype._report = function(context) {\n\t\t\ttasks.afterQueue(new ReportTask(this, context));\n\t\t};\n\n\t\tRejected.prototype._unreport = function() {\n\t\t\tif(this.handled) {\n\t\t\t\treturn;\n\t\t\t}\n\t\t\tthis.handled = true;\n\t\t\ttasks.afterQueue(new UnreportTask(this));\n\t\t};\n\n\t\tRejected.prototype.fail = function(context) {\n\t\t\tthis.reported = true;\n\t\t\temitRejection('unhandledRejection', this);\n\t\t\tPromise.onFatalRejection(this, context === void 0 ? this.context : context);\n\t\t};\n\n\t\tfunction ReportTask(rejection, context) {\n\t\t\tthis.rejection = rejection;\n\t\t\tthis.context = context;\n\t\t}\n\n\t\tReportTask.prototype.run = function() {\n\t\t\tif(!this.rejection.handled && !this.rejection.reported) {\n\t\t\t\tthis.rejection.reported = true;\n\t\t\t\temitRejection('unhandledRejection', this.rejection) ||\n\t\t\t\t\tPromise.onPotentiallyUnhandledRejection(this.rejection, this.context);\n\t\t\t}\n\t\t};\n\n\t\tfunction UnreportTask(rejection) {\n\t\t\tthis.rejection = rejection;\n\t\t}\n\n\t\tUnreportTask.prototype.run = function() {\n\t\t\tif(this.rejection.reported) {\n\t\t\t\temitRejection('rejectionHandled', this.rejection) ||\n\t\t\t\t\tPromise.onPotentiallyUnhandledRejectionHandled(this.rejection);\n\t\t\t}\n\t\t};\n\n\t\t// Unhandled rejection hooks\n\t\t// By default, everything is a noop\n\n\t\tPromise.createContext\n\t\t\t= Promise.enterContext\n\t\t\t= Promise.exitContext\n\t\t\t= Promise.onPotentiallyUnhandledRejection\n\t\t\t= Promise.onPotentiallyUnhandledRejectionHandled\n\t\t\t= Promise.onFatalRejection\n\t\t\t= noop;\n\n\t\t// Errors and singletons\n\n\t\tvar foreverPendingHandler = new Handler();\n\t\tvar foreverPendingPromise = new Promise(Handler, foreverPendingHandler);\n\n\t\tfunction cycle() {\n\t\t\treturn new Rejected(new TypeError('Promise cycle'));\n\t\t}\n\n\t\t// Task runners\n\n\t\t/**\n\t\t * Run a single consumer\n\t\t * @constructor\n\t\t */\n\t\tfunction ContinuationTask(continuation, handler) {\n\t\t\tthis.continuation = continuation;\n\t\t\tthis.handler = handler;\n\t\t}\n\n\t\tContinuationTask.prototype.run = function() {\n\t\t\tthis.handler.join().when(this.continuation);\n\t\t};\n\n\t\t/**\n\t\t * Run a queue of progress handlers\n\t\t * @constructor\n\t\t */\n\t\tfunction ProgressTask(value, handler) {\n\t\t\tthis.handler = handler;\n\t\t\tthis.value = value;\n\t\t}\n\n\t\tProgressTask.prototype.run = function() {\n\t\t\tvar q = this.handler.consumers;\n\t\t\tif(q === void 0) {\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tfor (var c, i = 0; i < q.length; ++i) {\n\t\t\t\tc = q[i];\n\t\t\t\trunNotify(c.progress, this.value, this.handler, c.receiver, c.resolver);\n\t\t\t}\n\t\t};\n\n\t\t/**\n\t\t * Assimilate a thenable, sending it's value to resolver\n\t\t * @param {function} then\n\t\t * @param {object|function} thenable\n\t\t * @param {object} resolver\n\t\t * @constructor\n\t\t */\n\t\tfunction AssimilateTask(then, thenable, resolver) {\n\t\t\tthis._then = then;\n\t\t\tthis.thenable = thenable;\n\t\t\tthis.resolver = resolver;\n\t\t}\n\n\t\tAssimilateTask.prototype.run = function() {\n\t\t\tvar h = this.resolver;\n\t\t\ttryAssimilate(this._then, this.thenable, _resolve, _reject, _notify);\n\n\t\t\tfunction _resolve(x) { h.resolve(x); }\n\t\t\tfunction _reject(x)  { h.reject(x); }\n\t\t\tfunction _notify(x)  { h.notify(x); }\n\t\t};\n\n\t\tfunction tryAssimilate(then, thenable, resolve, reject, notify) {\n\t\t\ttry {\n\t\t\t\tthen.call(thenable, resolve, reject, notify);\n\t\t\t} catch (e) {\n\t\t\t\treject(e);\n\t\t\t}\n\t\t}\n\n\t\t/**\n\t\t * Fold a handler value with z\n\t\t * @constructor\n\t\t */\n\t\tfunction Fold(f, z, c, to) {\n\t\t\tthis.f = f; this.z = z; this.c = c; this.to = to;\n\t\t\tthis.resolver = failIfRejected;\n\t\t\tthis.receiver = this;\n\t\t}\n\n\t\tFold.prototype.fulfilled = function(x) {\n\t\t\tthis.f.call(this.c, this.z, x, this.to);\n\t\t};\n\n\t\tFold.prototype.rejected = function(x) {\n\t\t\tthis.to.reject(x);\n\t\t};\n\n\t\tFold.prototype.progress = function(x) {\n\t\t\tthis.to.notify(x);\n\t\t};\n\n\t\t// Other helpers\n\n\t\t/**\n\t\t * @param {*} x\n\t\t * @returns {boolean} true iff x is a trusted Promise\n\t\t */\n\t\tfunction isPromise(x) {\n\t\t\treturn x instanceof Promise;\n\t\t}\n\n\t\t/**\n\t\t * Test just enough to rule out primitives, in order to take faster\n\t\t * paths in some code\n\t\t * @param {*} x\n\t\t * @returns {boolean} false iff x is guaranteed *not* to be a thenable\n\t\t */\n\t\tfunction maybeThenable(x) {\n\t\t\treturn (typeof x === 'object' || typeof x === 'function') && x !== null;\n\t\t}\n\n\t\tfunction runContinuation1(f, h, receiver, next) {\n\t\t\tif(typeof f !== 'function') {\n\t\t\t\treturn next.become(h);\n\t\t\t}\n\n\t\t\tPromise.enterContext(h);\n\t\t\ttryCatchReject(f, h.value, receiver, next);\n\t\t\tPromise.exitContext();\n\t\t}\n\n\t\tfunction runContinuation3(f, x, h, receiver, next) {\n\t\t\tif(typeof f !== 'function') {\n\t\t\t\treturn next.become(h);\n\t\t\t}\n\n\t\t\tPromise.enterContext(h);\n\t\t\ttryCatchReject3(f, x, h.value, receiver, next);\n\t\t\tPromise.exitContext();\n\t\t}\n\n\t\t/**\n\t\t * @deprecated\n\t\t */\n\t\tfunction runNotify(f, x, h, receiver, next) {\n\t\t\tif(typeof f !== 'function') {\n\t\t\t\treturn next.notify(x);\n\t\t\t}\n\n\t\t\tPromise.enterContext(h);\n\t\t\ttryCatchReturn(f, x, receiver, next);\n\t\t\tPromise.exitContext();\n\t\t}\n\n\t\tfunction tryCatch2(f, a, b) {\n\t\t\ttry {\n\t\t\t\treturn f(a, b);\n\t\t\t} catch(e) {\n\t\t\t\treturn reject(e);\n\t\t\t}\n\t\t}\n\n\t\t/**\n\t\t * Return f.call(thisArg, x), or if it throws return a rejected promise for\n\t\t * the thrown exception\n\t\t */\n\t\tfunction tryCatchReject(f, x, thisArg, next) {\n\t\t\ttry {\n\t\t\t\tnext.become(getHandler(f.call(thisArg, x)));\n\t\t\t} catch(e) {\n\t\t\t\tnext.become(new Rejected(e));\n\t\t\t}\n\t\t}\n\n\t\t/**\n\t\t * Same as above, but includes the extra argument parameter.\n\t\t */\n\t\tfunction tryCatchReject3(f, x, y, thisArg, next) {\n\t\t\ttry {\n\t\t\t\tf.call(thisArg, x, y, next);\n\t\t\t} catch(e) {\n\t\t\t\tnext.become(new Rejected(e));\n\t\t\t}\n\t\t}\n\n\t\t/**\n\t\t * @deprecated\n\t\t * Return f.call(thisArg, x), or if it throws, *return* the exception\n\t\t */\n\t\tfunction tryCatchReturn(f, x, thisArg, next) {\n\t\t\ttry {\n\t\t\t\tnext.notify(f.call(thisArg, x));\n\t\t\t} catch(e) {\n\t\t\t\tnext.notify(e);\n\t\t\t}\n\t\t}\n\n\t\tfunction inherit(Parent, Child) {\n\t\t\tChild.prototype = objectCreate(Parent.prototype);\n\t\t\tChild.prototype.constructor = Child;\n\t\t}\n\n\t\tfunction snd(x, y) {\n\t\t\treturn y;\n\t\t}\n\n\t\tfunction noop() {}\n\n\t\tfunction initEmitRejection() {\n\t\t\t/*global process, self, CustomEvent*/\n\t\t\tif(typeof process !== 'undefined' && process !== null\n\t\t\t\t&& typeof process.emit === 'function') {\n\t\t\t\t// Returning falsy here means to call the default\n\t\t\t\t// onPotentiallyUnhandledRejection API.  This is safe even in\n\t\t\t\t// browserify since process.emit always returns falsy in browserify:\n\t\t\t\t// https://github.com/defunctzombie/node-process/blob/master/browser.js#L40-L46\n\t\t\t\treturn function(type, rejection) {\n\t\t\t\t\treturn type === 'unhandledRejection'\n\t\t\t\t\t\t? process.emit(type, rejection.value, rejection)\n\t\t\t\t\t\t: process.emit(type, rejection);\n\t\t\t\t};\n\t\t\t} else if(typeof self !== 'undefined' && typeof CustomEvent === 'function') {\n\t\t\t\treturn (function(noop, self, CustomEvent) {\n\t\t\t\t\tvar hasCustomEvent = false;\n\t\t\t\t\ttry {\n\t\t\t\t\t\tvar ev = new CustomEvent('unhandledRejection');\n\t\t\t\t\t\thasCustomEvent = ev instanceof CustomEvent;\n\t\t\t\t\t} catch (e) {}\n\n\t\t\t\t\treturn !hasCustomEvent ? noop : function(type, rejection) {\n\t\t\t\t\t\tvar ev = new CustomEvent(type, {\n\t\t\t\t\t\t\tdetail: {\n\t\t\t\t\t\t\t\treason: rejection.value,\n\t\t\t\t\t\t\t\tkey: rejection\n\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\tbubbles: false,\n\t\t\t\t\t\t\tcancelable: true\n\t\t\t\t\t\t});\n\n\t\t\t\t\t\treturn !self.dispatchEvent(ev);\n\t\t\t\t\t};\n\t\t\t\t}(noop, self, CustomEvent));\n\t\t\t}\n\n\t\t\treturn noop;\n\t\t}\n\n\t\treturn Promise;\n\t};\n});\n}(typeof define === 'function' && define.amd ? define : function(factory) { module.exports = factory(); }));\n\n}).call(this,require('_process'))\n},{\"_process\":2}],37:[function(require,module,exports){\n/** @license MIT License (c) copyright 2010-2014 original author or authors */\n/** @author Brian Cavalier */\n/** @author John Hann */\n\n(function(define) { 'use strict';\ndefine(function() {\n\n\treturn {\n\t\tpending: toPendingState,\n\t\tfulfilled: toFulfilledState,\n\t\trejected: toRejectedState,\n\t\tinspect: inspect\n\t};\n\n\tfunction toPendingState() {\n\t\treturn { state: 'pending' };\n\t}\n\n\tfunction toRejectedState(e) {\n\t\treturn { state: 'rejected', reason: e };\n\t}\n\n\tfunction toFulfilledState(x) {\n\t\treturn { state: 'fulfilled', value: x };\n\t}\n\n\tfunction inspect(handler) {\n\t\tvar state = handler.state();\n\t\treturn state === 0 ? toPendingState()\n\t\t\t : state > 0   ? toFulfilledState(handler.value)\n\t\t\t               : toRejectedState(handler.value);\n\t}\n\n});\n}(typeof define === 'function' && define.amd ? define : function(factory) { module.exports = factory(); }));\n\n},{}],38:[function(require,module,exports){\n/** @license MIT License (c) copyright 2010-2014 original author or authors */\n\n/**\n * Promises/A+ and when() implementation\n * when is part of the cujoJS family of libraries (http://cujojs.com/)\n * @author Brian Cavalier\n * @author John Hann\n * @version 3.7.2\n */\n(function(define) { 'use strict';\ndefine(function (require) {\n\n\tvar timed = require('./lib/decorators/timed');\n\tvar array = require('./lib/decorators/array');\n\tvar flow = require('./lib/decorators/flow');\n\tvar fold = require('./lib/decorators/fold');\n\tvar inspect = require('./lib/decorators/inspect');\n\tvar generate = require('./lib/decorators/iterate');\n\tvar progress = require('./lib/decorators/progress');\n\tvar withThis = require('./lib/decorators/with');\n\tvar unhandledRejection = require('./lib/decorators/unhandledRejection');\n\tvar TimeoutError = require('./lib/TimeoutError');\n\n\tvar Promise = [array, flow, fold, generate, progress,\n\t\tinspect, withThis, timed, unhandledRejection]\n\t\t.reduce(function(Promise, feature) {\n\t\t\treturn feature(Promise);\n\t\t}, require('./lib/Promise'));\n\n\tvar apply = require('./lib/apply')(Promise);\n\n\t// Public API\n\n\twhen.promise     = promise;              // Create a pending promise\n\twhen.resolve     = Promise.resolve;      // Create a resolved promise\n\twhen.reject      = Promise.reject;       // Create a rejected promise\n\n\twhen.lift        = lift;                 // lift a function to return promises\n\twhen['try']      = attempt;              // call a function and return a promise\n\twhen.attempt     = attempt;              // alias for when.try\n\n\twhen.iterate     = Promise.iterate;      // DEPRECATED (use cujojs/most streams) Generate a stream of promises\n\twhen.unfold      = Promise.unfold;       // DEPRECATED (use cujojs/most streams) Generate a stream of promises\n\n\twhen.join        = join;                 // Join 2 or more promises\n\n\twhen.all         = all;                  // Resolve a list of promises\n\twhen.settle      = settle;               // Settle a list of promises\n\n\twhen.any         = lift(Promise.any);    // One-winner race\n\twhen.some        = lift(Promise.some);   // Multi-winner race\n\twhen.race        = lift(Promise.race);   // First-to-settle race\n\n\twhen.map         = map;                  // Array.map() for promises\n\twhen.filter      = filter;               // Array.filter() for promises\n\twhen.reduce      = lift(Promise.reduce);       // Array.reduce() for promises\n\twhen.reduceRight = lift(Promise.reduceRight);  // Array.reduceRight() for promises\n\n\twhen.isPromiseLike = isPromiseLike;      // Is something promise-like, aka thenable\n\n\twhen.Promise     = Promise;              // Promise constructor\n\twhen.defer       = defer;                // Create a {promise, resolve, reject} tuple\n\n\t// Error types\n\n\twhen.TimeoutError = TimeoutError;\n\n\t/**\n\t * Get a trusted promise for x, or by transforming x with onFulfilled\n\t *\n\t * @param {*} x\n\t * @param {function?} onFulfilled callback to be called when x is\n\t *   successfully fulfilled.  If promiseOrValue is an immediate value, callback\n\t *   will be invoked immediately.\n\t * @param {function?} onRejected callback to be called when x is\n\t *   rejected.\n\t * @param {function?} onProgress callback to be called when progress updates\n\t *   are issued for x. @deprecated\n\t * @returns {Promise} a new promise that will fulfill with the return\n\t *   value of callback or errback or the completion value of promiseOrValue if\n\t *   callback and/or errback is not supplied.\n\t */\n\tfunction when(x, onFulfilled, onRejected, onProgress) {\n\t\tvar p = Promise.resolve(x);\n\t\tif (arguments.length < 2) {\n\t\t\treturn p;\n\t\t}\n\n\t\treturn p.then(onFulfilled, onRejected, onProgress);\n\t}\n\n\t/**\n\t * Creates a new promise whose fate is determined by resolver.\n\t * @param {function} resolver function(resolve, reject, notify)\n\t * @returns {Promise} promise whose fate is determine by resolver\n\t */\n\tfunction promise(resolver) {\n\t\treturn new Promise(resolver);\n\t}\n\n\t/**\n\t * Lift the supplied function, creating a version of f that returns\n\t * promises, and accepts promises as arguments.\n\t * @param {function} f\n\t * @returns {Function} version of f that returns promises\n\t */\n\tfunction lift(f) {\n\t\treturn function() {\n\t\t\tfor(var i=0, l=arguments.length, a=new Array(l); i<l; ++i) {\n\t\t\t\ta[i] = arguments[i];\n\t\t\t}\n\t\t\treturn apply(f, this, a);\n\t\t};\n\t}\n\n\t/**\n\t * Call f in a future turn, with the supplied args, and return a promise\n\t * for the result.\n\t * @param {function} f\n\t * @returns {Promise}\n\t */\n\tfunction attempt(f /*, args... */) {\n\t\t/*jshint validthis:true */\n\t\tfor(var i=0, l=arguments.length-1, a=new Array(l); i<l; ++i) {\n\t\t\ta[i] = arguments[i+1];\n\t\t}\n\t\treturn apply(f, this, a);\n\t}\n\n\t/**\n\t * Creates a {promise, resolver} pair, either or both of which\n\t * may be given out safely to consumers.\n\t * @return {{promise: Promise, resolve: function, reject: function, notify: function}}\n\t */\n\tfunction defer() {\n\t\treturn new Deferred();\n\t}\n\n\tfunction Deferred() {\n\t\tvar p = Promise._defer();\n\n\t\tfunction resolve(x) { p._handler.resolve(x); }\n\t\tfunction reject(x) { p._handler.reject(x); }\n\t\tfunction notify(x) { p._handler.notify(x); }\n\n\t\tthis.promise = p;\n\t\tthis.resolve = resolve;\n\t\tthis.reject = reject;\n\t\tthis.notify = notify;\n\t\tthis.resolver = { resolve: resolve, reject: reject, notify: notify };\n\t}\n\n\t/**\n\t * Determines if x is promise-like, i.e. a thenable object\n\t * NOTE: Will return true for *any thenable object*, and isn't truly\n\t * safe, since it may attempt to access the `then` property of x (i.e.\n\t *  clever/malicious getters may do weird things)\n\t * @param {*} x anything\n\t * @returns {boolean} true if x is promise-like\n\t */\n\tfunction isPromiseLike(x) {\n\t\treturn x && typeof x.then === 'function';\n\t}\n\n\t/**\n\t * Return a promise that will resolve only once all the supplied arguments\n\t * have resolved. The resolution value of the returned promise will be an array\n\t * containing the resolution values of each of the arguments.\n\t * @param {...*} arguments may be a mix of promises and values\n\t * @returns {Promise}\n\t */\n\tfunction join(/* ...promises */) {\n\t\treturn Promise.all(arguments);\n\t}\n\n\t/**\n\t * Return a promise that will fulfill once all input promises have\n\t * fulfilled, or reject when any one input promise rejects.\n\t * @param {array|Promise} promises array (or promise for an array) of promises\n\t * @returns {Promise}\n\t */\n\tfunction all(promises) {\n\t\treturn when(promises, Promise.all);\n\t}\n\n\t/**\n\t * Return a promise that will always fulfill with an array containing\n\t * the outcome states of all input promises.  The returned promise\n\t * will only reject if `promises` itself is a rejected promise.\n\t * @param {array|Promise} promises array (or promise for an array) of promises\n\t * @returns {Promise} promise for array of settled state descriptors\n\t */\n\tfunction settle(promises) {\n\t\treturn when(promises, Promise.settle);\n\t}\n\n\t/**\n\t * Promise-aware array map function, similar to `Array.prototype.map()`,\n\t * but input array may contain promises or values.\n\t * @param {Array|Promise} promises array of anything, may contain promises and values\n\t * @param {function(x:*, index:Number):*} mapFunc map function which may\n\t *  return a promise or value\n\t * @returns {Promise} promise that will fulfill with an array of mapped values\n\t *  or reject if any input promise rejects.\n\t */\n\tfunction map(promises, mapFunc) {\n\t\treturn when(promises, function(promises) {\n\t\t\treturn Promise.map(promises, mapFunc);\n\t\t});\n\t}\n\n\t/**\n\t * Filter the provided array of promises using the provided predicate.  Input may\n\t * contain promises and values\n\t * @param {Array|Promise} promises array of promises and values\n\t * @param {function(x:*, index:Number):boolean} predicate filtering predicate.\n\t *  Must return truthy (or promise for truthy) for items to retain.\n\t * @returns {Promise} promise that will fulfill with an array containing all items\n\t *  for which predicate returned truthy.\n\t */\n\tfunction filter(promises, predicate) {\n\t\treturn when(promises, function(promises) {\n\t\t\treturn Promise.filter(promises, predicate);\n\t\t});\n\t}\n\n\treturn when;\n});\n})(typeof define === 'function' && define.amd ? define : function (factory) { module.exports = factory(require); });\n\n},{\"./lib/Promise\":21,\"./lib/TimeoutError\":23,\"./lib/apply\":24,\"./lib/decorators/array\":25,\"./lib/decorators/flow\":26,\"./lib/decorators/fold\":27,\"./lib/decorators/inspect\":28,\"./lib/decorators/iterate\":29,\"./lib/decorators/progress\":30,\"./lib/decorators/timed\":31,\"./lib/decorators/unhandledRejection\":32,\"./lib/decorators/with\":33}],39:[function(require,module,exports){\n/*\n * Copyright 2013 the original author or authors\n * @license MIT, see LICENSE.txt for details\n *\n * @author Scott Andrews\n */\n\n(function (define) {\n\t'use strict';\n\n\tdefine(function (/* require */) {\n\n\t\treturn {\n\n\t\t\t/**\n\t\t\t * Find objects within a graph the contain a property of a certain name.\n\t\t\t *\n\t\t\t * NOTE: this method will not discover object graph cycles.\n\t\t\t *\n\t\t\t * @param {*} obj object to search on\n\t\t\t * @param {string} prop name of the property to search for\n\t\t\t * @param {Function} callback function to receive the found properties and their parent\n\t\t\t */\n\t\t\tfindProperties: function findProperties(obj, prop, callback) {\n\t\t\t\tif (typeof obj !== 'object' || obj === null) { return; }\n\t\t\t\tif (prop in obj) {\n\t\t\t\t\tcallback(obj[prop], obj, prop);\n\t\t\t\t}\n\t\t\t\tObject.keys(obj).forEach(function (key) {\n\t\t\t\t\tfindProperties(obj[key], prop, callback);\n\t\t\t\t});\n\t\t\t}\n\n\t\t};\n\n\t});\n\n}(\n\ttypeof define === 'function' && define.amd ? define : function (factory) { module.exports = factory(require); }\n\t// Boilerplate for AMD and Node\n));\n\n},{}],40:[function(require,module,exports){\n/*\n * Copyright 2013 the original author or authors\n * @license MIT, see LICENSE.txt for details\n *\n * @author Scott Andrews\n */\n\n(function (define) {\n\t'use strict';\n\n\tdefine(function (require) {\n\n\t\tvar when;\n\n\t\twhen = require('when');\n\n\t\t/**\n\t\t * Create a promise whose work is started only when a handler is registered.\n\t\t *\n\t\t * The work function will be invoked at most once. Thrown values will result\n\t\t * in promise rejection.\n\t\t *\n\t\t * @param {Function} work function whose ouput is used to resolve the\n\t\t *   returned promise.\n\t\t * @returns {Promise} a lazy promise\n\t\t */\n\t\tfunction lazyPromise(work) {\n\t\t\tvar defer, started, resolver, promise, then;\n\n\t\t\tdefer = when.defer();\n\t\t\tstarted = false;\n\n\t\t\tresolver = defer.resolver;\n\t\t\tpromise = defer.promise;\n\t\t\tthen = promise.then;\n\n\t\t\tpromise.then = function () {\n\t\t\t\tif (!started) {\n\t\t\t\t\tstarted = true;\n\t\t\t\t\twhen.attempt(work).then(resolver.resolve, resolver.reject);\n\t\t\t\t}\n\t\t\t\treturn then.apply(promise, arguments);\n\t\t\t};\n\n\t\t\treturn promise;\n\t\t}\n\n\t\treturn lazyPromise;\n\n\t});\n\n}(\n\ttypeof define === 'function' && define.amd ? define : function (factory) { module.exports = factory(require); }\n\t// Boilerplate for AMD and Node\n));\n\n},{\"when\":38}],41:[function(require,module,exports){\n/*\n * Copyright 2012-2013 the original author or authors\n * @license MIT, see LICENSE.txt for details\n *\n * @author Scott Andrews\n */\n\n(function (define) {\n\t'use strict';\n\n\t// derived from dojo.mixin\n\tdefine(function (/* require */) {\n\n\t\tvar empty = {};\n\n\t\t/**\n\t\t * Mix the properties from the source object into the destination object.\n\t\t * When the same property occurs in more then one object, the right most\n\t\t * value wins.\n\t\t *\n\t\t * @param {Object} dest the object to copy properties to\n\t\t * @param {Object} sources the objects to copy properties from.  May be 1 to N arguments, but not an Array.\n\t\t * @return {Object} the destination object\n\t\t */\n\t\tfunction mixin(dest /*, sources... */) {\n\t\t\tvar i, l, source, name;\n\n\t\t\tif (!dest) { dest = {}; }\n\t\t\tfor (i = 1, l = arguments.length; i < l; i += 1) {\n\t\t\t\tsource = arguments[i];\n\t\t\t\tfor (name in source) {\n\t\t\t\t\tif (!(name in dest) || (dest[name] !== source[name] && (!(name in empty) || empty[name] !== source[name]))) {\n\t\t\t\t\t\tdest[name] = source[name];\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\n\t\t\treturn dest; // Object\n\t\t}\n\n\t\treturn mixin;\n\n\t});\n\n}(\n\ttypeof define === 'function' && define.amd ? define : function (factory) { module.exports = factory(require); }\n\t// Boilerplate for AMD and Node\n));\n\n},{}],42:[function(require,module,exports){\n/*\n * Copyright 2012 the original author or authors\n * @license MIT, see LICENSE.txt for details\n *\n * @author Scott Andrews\n */\n\n(function (define) {\n\t'use strict';\n\n\tdefine(function (/* require */) {\n\n\t\t/**\n\t\t * Normalize HTTP header names using the pseudo camel case.\n\t\t *\n\t\t * For example:\n\t\t *   content-type         -> Content-Type\n\t\t *   accepts              -> Accepts\n\t\t *   x-custom-header-name -> X-Custom-Header-Name\n\t\t *\n\t\t * @param {string} name the raw header name\n\t\t * @return {string} the normalized header name\n\t\t */\n\t\tfunction normalizeHeaderName(name) {\n\t\t\treturn name.toLowerCase()\n\t\t\t\t.split('-')\n\t\t\t\t.map(function (chunk) { return chunk.charAt(0).toUpperCase() + chunk.slice(1); })\n\t\t\t\t.join('-');\n\t\t}\n\n\t\treturn normalizeHeaderName;\n\n\t});\n\n}(\n\ttypeof define === 'function' && define.amd ? define : function (factory) { module.exports = factory(require); }\n\t// Boilerplate for AMD and Node\n));\n\n},{}],43:[function(require,module,exports){\n/*\n * Copyright 2014-2015 the original author or authors\n * @license MIT, see LICENSE.txt for details\n *\n * @author Scott Andrews\n */\n\n(function (define) {\n\t'use strict';\n\n\tdefine(function (require) {\n\n\t\tvar when = require('when'),\n\t\t\tnormalizeHeaderName = require('./normalizeHeaderName');\n\n\t\tfunction property(promise, name) {\n\t\t\treturn promise.then(\n\t\t\t\tfunction (value) {\n\t\t\t\t\treturn value && value[name];\n\t\t\t\t},\n\t\t\t\tfunction (value) {\n\t\t\t\t\treturn when.reject(value && value[name]);\n\t\t\t\t}\n\t\t\t);\n\t\t}\n\n\t\t/**\n\t\t * Obtain the response entity\n\t\t *\n\t\t * @returns {Promise} for the response entity\n\t\t */\n\t\tfunction entity() {\n\t\t\t/*jshint validthis:true */\n\t\t\treturn property(this, 'entity');\n\t\t}\n\n\t\t/**\n\t\t * Obtain the response status\n\t\t *\n\t\t * @returns {Promise} for the response status\n\t\t */\n\t\tfunction status() {\n\t\t\t/*jshint validthis:true */\n\t\t\treturn property(property(this, 'status'), 'code');\n\t\t}\n\n\t\t/**\n\t\t * Obtain the response headers map\n\t\t *\n\t\t * @returns {Promise} for the response headers map\n\t\t */\n\t\tfunction headers() {\n\t\t\t/*jshint validthis:true */\n\t\t\treturn property(this, 'headers');\n\t\t}\n\n\t\t/**\n\t\t * Obtain a specific response header\n\t\t *\n\t\t * @param {String} headerName the header to retrieve\n\t\t * @returns {Promise} for the response header's value\n\t\t */\n\t\tfunction header(headerName) {\n\t\t\t/*jshint validthis:true */\n\t\t\theaderName = normalizeHeaderName(headerName);\n\t\t\treturn property(this.headers(), headerName);\n\t\t}\n\n\t\t/**\n\t\t * Follow a related resource\n\t\t *\n\t\t * The relationship to follow may be define as a plain string, an object\n\t\t * with the rel and params, or an array containing one or more entries\n\t\t * with the previous forms.\n\t\t *\n\t\t * Examples:\n\t\t *   response.follow('next')\n\t\t *\n\t\t *   response.follow({ rel: 'next', params: { pageSize: 100 } })\n\t\t *\n\t\t *   response.follow([\n\t\t *       { rel: 'items', params: { projection: 'noImages' } },\n\t\t *       'search',\n\t\t *       { rel: 'findByGalleryIsNull', params: { projection: 'noImages' } },\n\t\t *       'items'\n\t\t *   ])\n\t\t *\n\t\t * @param {String|Object|Array} rels one, or more, relationships to follow\n\t\t * @returns ResponsePromise<Response> related resource\n\t\t */\n\t\tfunction follow(rels) {\n\t\t\t/*jshint validthis:true */\n\t\t\trels = [].concat(rels);\n\t\t\treturn make(when.reduce(rels, function (response, rel) {\n\t\t\t\tif (typeof rel === 'string') {\n\t\t\t\t\trel = { rel: rel };\n\t\t\t\t}\n\t\t\t\tif (typeof response.entity.clientFor !== 'function') {\n\t\t\t\t\tthrow new Error('Hypermedia response expected');\n\t\t\t\t}\n\t\t\t\tvar client = response.entity.clientFor(rel.rel);\n\t\t\t\treturn client({ params: rel.params });\n\t\t\t}, this));\n\t\t}\n\n\t\t/**\n\t\t * Wrap a Promise as an ResponsePromise\n\t\t *\n\t\t * @param {Promise<Response>} promise the promise for an HTTP Response\n\t\t * @returns {ResponsePromise<Response>} wrapped promise for Response with additional helper methods\n\t\t */\n\t\tfunction make(promise) {\n\t\t\tpromise.status = status;\n\t\t\tpromise.headers = headers;\n\t\t\tpromise.header = header;\n\t\t\tpromise.entity = entity;\n\t\t\tpromise.follow = follow;\n\t\t\treturn promise;\n\t\t}\n\n\t\tfunction responsePromise() {\n\t\t\treturn make(when.apply(when, arguments));\n\t\t}\n\n\t\tresponsePromise.make = make;\n\t\tresponsePromise.reject = function (val) {\n\t\t\treturn make(when.reject(val));\n\t\t};\n\t\tresponsePromise.promise = function (func) {\n\t\t\treturn make(when.promise(func));\n\t\t};\n\n\t\treturn responsePromise;\n\n\t});\n\n}(\n\ttypeof define === 'function' && define.amd ? define : function (factory) { module.exports = factory(require); }\n\t// Boilerplate for AMD and Node\n));\n\n},{\"./normalizeHeaderName\":42,\"when\":38}],44:[function(require,module,exports){\n/*\n * Copyright 2015 the original author or authors\n * @license MIT, see LICENSE.txt for details\n *\n * @author Scott Andrews\n */\n\n(function (define) {\n\t'use strict';\n\n\tdefine(function (/* require */) {\n\n\t\tvar charMap;\n\n\t\tcharMap = (function () {\n\t\t\tvar strings = {\n\t\t\t\talpha: 'ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz',\n\t\t\t\tdigit: '0123456789'\n\t\t\t};\n\n\t\t\tstrings.genDelims = ':/?#[]@';\n\t\t\tstrings.subDelims = '!$&\\'()*+,;=';\n\t\t\tstrings.reserved = strings.genDelims + strings.subDelims;\n\t\t\tstrings.unreserved = strings.alpha + strings.digit + '-._~';\n\t\t\tstrings.url = strings.reserved + strings.unreserved;\n\t\t\tstrings.scheme = strings.alpha + strings.digit + '+-.';\n\t\t\tstrings.userinfo = strings.unreserved + strings.subDelims + ':';\n\t\t\tstrings.host = strings.unreserved + strings.subDelims;\n\t\t\tstrings.port = strings.digit;\n\t\t\tstrings.pchar = strings.unreserved + strings.subDelims + ':@';\n\t\t\tstrings.segment = strings.pchar;\n\t\t\tstrings.path = strings.segment + '/';\n\t\t\tstrings.query = strings.pchar + '/?';\n\t\t\tstrings.fragment = strings.pchar + '/?';\n\n\t\t\treturn Object.keys(strings).reduce(function (charMap, set) {\n\t\t\t\tcharMap[set] = strings[set].split('').reduce(function (chars, char) {\n\t\t\t\t\tchars[char] = true;\n\t\t\t\t\treturn chars;\n\t\t\t\t}, {});\n\t\t\t\treturn charMap;\n\t\t\t}, {});\n\t\t}());\n\n\t\tfunction encode(str, allowed) {\n\t\t\tif (typeof str !== 'string') {\n\t\t\t\tthrow new Error('String required for URL encoding');\n\t\t\t}\n\t\t\treturn str.split('').map(function (char) {\n\t\t\t\tif (allowed.hasOwnProperty(char)) {\n\t\t\t\t\treturn char;\n\t\t\t\t}\n\t\t\t\tvar code = char.charCodeAt(0);\n\t\t\t\tif (code <= 127) {\n\t\t\t\t\treturn '%' + code.toString(16).toUpperCase();\n\t\t\t\t}\n\t\t\t\telse {\n\t\t\t\t\treturn encodeURIComponent(char).toUpperCase();\n\t\t\t\t}\n\t\t\t}).join('');\n\t\t}\n\n\t\tfunction makeEncoder(allowed) {\n\t\t\tallowed = allowed || charMap.unreserved;\n\t\t\treturn function (str) {\n\t\t\t\treturn encode(str, allowed);\n\t\t\t};\n\t\t}\n\n\t\tfunction decode(str) {\n\t\t\treturn decodeURIComponent(str);\n\t\t}\n\n\t\treturn {\n\n\t\t\t/*\n\t\t\t * Decode URL encoded strings\n\t\t\t *\n\t\t\t * @param {string} URL encoded string\n\t\t\t * @returns {string} URL decoded string\n\t\t\t */\n\t\t\tdecode: decode,\n\n\t\t\t/*\n\t\t\t * URL encode a string\n\t\t\t *\n\t\t\t * All but alpha-numerics and a very limited set of punctuation - . _ ~ are\n\t\t\t * encoded.\n\t\t\t *\n\t\t\t * @param {string} string to encode\n\t\t\t * @returns {string} URL encoded string\n\t\t\t */\n\t\t\tencode: makeEncoder(),\n\n\t\t\t/*\n\t\t\t* URL encode a URL\n\t\t\t*\n\t\t\t* All character permitted anywhere in a URL are left unencoded even\n\t\t\t* if that character is not permitted in that portion of a URL.\n\t\t\t*\n\t\t\t* Note: This method is typically not what you want.\n\t\t\t*\n\t\t\t* @param {string} string to encode\n\t\t\t* @returns {string} URL encoded string\n\t\t\t*/\n\t\t\tencodeURL: makeEncoder(charMap.url),\n\n\t\t\t/*\n\t\t\t * URL encode the scheme portion of a URL\n\t\t\t *\n\t\t\t * @param {string} string to encode\n\t\t\t * @returns {string} URL encoded string\n\t\t\t */\n\t\t\tencodeScheme: makeEncoder(charMap.scheme),\n\n\t\t\t/*\n\t\t\t * URL encode the user info portion of a URL\n\t\t\t *\n\t\t\t * @param {string} string to encode\n\t\t\t * @returns {string} URL encoded string\n\t\t\t */\n\t\t\tencodeUserInfo: makeEncoder(charMap.userinfo),\n\n\t\t\t/*\n\t\t\t * URL encode the host portion of a URL\n\t\t\t *\n\t\t\t * @param {string} string to encode\n\t\t\t * @returns {string} URL encoded string\n\t\t\t */\n\t\t\tencodeHost: makeEncoder(charMap.host),\n\n\t\t\t/*\n\t\t\t * URL encode the port portion of a URL\n\t\t\t *\n\t\t\t * @param {string} string to encode\n\t\t\t * @returns {string} URL encoded string\n\t\t\t */\n\t\t\tencodePort: makeEncoder(charMap.port),\n\n\t\t\t/*\n\t\t\t * URL encode a path segment portion of a URL\n\t\t\t *\n\t\t\t * @param {string} string to encode\n\t\t\t * @returns {string} URL encoded string\n\t\t\t */\n\t\t\tencodePathSegment: makeEncoder(charMap.segment),\n\n\t\t\t/*\n\t\t\t * URL encode the path portion of a URL\n\t\t\t *\n\t\t\t * @param {string} string to encode\n\t\t\t * @returns {string} URL encoded string\n\t\t\t */\n\t\t\tencodePath: makeEncoder(charMap.path),\n\n\t\t\t/*\n\t\t\t * URL encode the query portion of a URL\n\t\t\t *\n\t\t\t * @param {string} string to encode\n\t\t\t * @returns {string} URL encoded string\n\t\t\t */\n\t\t\tencodeQuery: makeEncoder(charMap.query),\n\n\t\t\t/*\n\t\t\t * URL encode the fragment portion of a URL\n\t\t\t *\n\t\t\t * @param {string} string to encode\n\t\t\t * @returns {string} URL encoded string\n\t\t\t */\n\t\t\tencodeFragment: makeEncoder(charMap.fragment)\n\n\t\t};\n\n\t});\n\n}(\n\ttypeof define === 'function' && define.amd ? define : function (factory) { module.exports = factory(require); }\n\t// Boilerplate for AMD and Node\n));\n\n},{}],45:[function(require,module,exports){\n/*\n * Copyright 2015 the original author or authors\n * @license MIT, see LICENSE.txt for details\n *\n * @author Scott Andrews\n */\n\n(function (define) {\n\t'use strict';\n\n\tvar undef;\n\n\tdefine(function (require) {\n\n\t\tvar uriEncoder, operations, prefixRE;\n\n\t\turiEncoder = require('./uriEncoder');\n\n\t\tprefixRE = /^([^:]*):([0-9]+)$/;\n\t\toperations = {\n\t\t\t'':  { first: '',  separator: ',', named: false, empty: '',  encoder: uriEncoder.encode },\n\t\t\t'+': { first: '',  separator: ',', named: false, empty: '',  encoder: uriEncoder.encodeURL },\n\t\t\t'#': { first: '#', separator: ',', named: false, empty: '',  encoder: uriEncoder.encodeURL },\n\t\t\t'.': { first: '.', separator: '.', named: false, empty: '',  encoder: uriEncoder.encode },\n\t\t\t'/': { first: '/', separator: '/', named: false, empty: '',  encoder: uriEncoder.encode },\n\t\t\t';': { first: ';', separator: ';', named: true,  empty: '',  encoder: uriEncoder.encode },\n\t\t\t'?': { first: '?', separator: '&', named: true,  empty: '=', encoder: uriEncoder.encode },\n\t\t\t'&': { first: '&', separator: '&', named: true,  empty: '=', encoder: uriEncoder.encode },\n\t\t\t'=': { reserved: true },\n\t\t\t',': { reserved: true },\n\t\t\t'!': { reserved: true },\n\t\t\t'@': { reserved: true },\n\t\t\t'|': { reserved: true }\n\t\t};\n\n\t\tfunction apply(operation, expression, params) {\n\t\t\t/*jshint maxcomplexity:11 */\n\t\t\treturn expression.split(',').reduce(function (result, variable) {\n\t\t\t\tvar opts, value;\n\n\t\t\t\topts = {};\n\t\t\t\tif (variable.slice(-1) === '*') {\n\t\t\t\t\tvariable = variable.slice(0, -1);\n\t\t\t\t\topts.explode = true;\n\t\t\t\t}\n\t\t\t\tif (prefixRE.test(variable)) {\n\t\t\t\t\tvar prefix = prefixRE.exec(variable);\n\t\t\t\t\tvariable = prefix[1];\n\t\t\t\t\topts.maxLength = parseInt(prefix[2]);\n\t\t\t\t}\n\n\t\t\t\tvariable = uriEncoder.decode(variable);\n\t\t\t\tvalue = params[variable];\n\n\t\t\t\tif (value === undef || value === null) {\n\t\t\t\t\treturn result;\n\t\t\t\t}\n\t\t\t\tif (typeof value === 'string') {\n\t\t\t\t\tif (opts.maxLength) {\n\t\t\t\t\t\tvalue = value.slice(0, opts.maxLength);\n\t\t\t\t\t}\n\t\t\t\t\tresult += result.length ? operation.separator : operation.first;\n\t\t\t\t\tif (operation.named) {\n\t\t\t\t\t\tresult += operation.encoder(variable);\n\t\t\t\t\t\tresult += value.length ? '=' : operation.empty;\n\t\t\t\t\t}\n\t\t\t\t\tresult += operation.encoder(value);\n\t\t\t\t}\n\t\t\t\telse if (Array.isArray(value)) {\n\t\t\t\t\tresult += value.reduce(function (result, value) {\n\t\t\t\t\t\tif (result.length) {\n\t\t\t\t\t\t\tresult += opts.explode ? operation.separator : ',';\n\t\t\t\t\t\t\tif (operation.named && opts.explode) {\n\t\t\t\t\t\t\t\tresult += operation.encoder(variable);\n\t\t\t\t\t\t\t\tresult += value.length ? '=' : operation.empty;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t\telse {\n\t\t\t\t\t\t\tresult += operation.first;\n\t\t\t\t\t\t\tif (operation.named) {\n\t\t\t\t\t\t\t\tresult += operation.encoder(variable);\n\t\t\t\t\t\t\t\tresult += value.length ? '=' : operation.empty;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t\tresult += operation.encoder(value);\n\t\t\t\t\t\treturn result;\n\t\t\t\t\t}, '');\n\t\t\t\t}\n\t\t\t\telse {\n\t\t\t\t\tresult += Object.keys(value).reduce(function (result, name) {\n\t\t\t\t\t\tif (result.length) {\n\t\t\t\t\t\t\tresult += opts.explode ? operation.separator : ',';\n\t\t\t\t\t\t}\n\t\t\t\t\t\telse {\n\t\t\t\t\t\t\tresult += operation.first;\n\t\t\t\t\t\t\tif (operation.named && !opts.explode) {\n\t\t\t\t\t\t\t\tresult += operation.encoder(variable);\n\t\t\t\t\t\t\t\tresult += value[name].length ? '=' : operation.empty;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t\tresult += operation.encoder(name);\n\t\t\t\t\t\tresult += opts.explode ? '=' : ',';\n\t\t\t\t\t\tresult += operation.encoder(value[name]);\n\t\t\t\t\t\treturn result;\n\t\t\t\t\t}, '');\n\t\t\t\t}\n\n\t\t\t\treturn result;\n\t\t\t}, '');\n\t\t}\n\n\t\tfunction expandExpression(expression, params) {\n\t\t\tvar operation;\n\n\t\t\toperation = operations[expression.slice(0,1)];\n\t\t\tif (operation) {\n\t\t\t\texpression = expression.slice(1);\n\t\t\t}\n\t\t\telse {\n\t\t\t\toperation = operations[''];\n\t\t\t}\n\n\t\t\tif (operation.reserved) {\n\t\t\t\tthrow new Error('Reserved expression operations are not supported');\n\t\t\t}\n\n\t\t\treturn apply(operation, expression, params);\n\t\t}\n\n\t\tfunction expandTemplate(template, params) {\n\t\t\tvar start, end, uri;\n\n\t\t\turi = '';\n\t\t\tend = 0;\n\t\t\twhile (true) {\n\t\t\t\tstart = template.indexOf('{', end);\n\t\t\t\tif (start === -1) {\n\t\t\t\t\t// no more expressions\n\t\t\t\t\turi += template.slice(end);\n\t\t\t\t\tbreak;\n\t\t\t\t}\n\t\t\t\turi += template.slice(end, start);\n\t\t\t\tend = template.indexOf('}', start) + 1;\n\t\t\t\turi += expandExpression(template.slice(start + 1, end - 1), params);\n\t\t\t}\n\n\t\t\treturn uri;\n\t\t}\n\n\t\treturn {\n\n\t\t\t/**\n\t\t\t * Expand a URI Template with parameters to form a URI.\n\t\t\t *\n\t\t\t * Full implementation (level 4) of rfc6570.\n\t\t\t * @see https://tools.ietf.org/html/rfc6570\n\t\t\t *\n\t\t\t * @param {string} template URI template\n\t\t\t * @param {Object} [params] params to apply to the template durring expantion\n\t\t\t * @returns {string} expanded URI\n\t\t\t */\n\t\t\texpand: expandTemplate\n\n\t\t};\n\n\t});\n\n}(\n\ttypeof define === 'function' && define.amd ? define : function (factory) { module.exports = factory(require); }\n\t// Boilerplate for AMD and Node\n));\n\n},{\"./uriEncoder\":44}]},{},[1])(1)\n});"],"sourceRoot":"/source/"}